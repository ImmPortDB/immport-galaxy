<tool id="csOverview" name="Generate overview information" version="1.0">
  <description>of the CrossSample analysis</description>
  <command interpreter="python">
    crossSampleOverview.py -i $input -I $inputmfi -s $mfistats -o $html_file -d $html_file.files_path -t $__tool_directory__
  </command>
  <inputs>
    <param format="flowstat1" name="input" type="data" label="CrossSample Population Summary Table"/>
    <param format="flowstat2" name="inputmfi" type="data" label="Centroids MFI Summary Table"/>
    <param format="flowstat3" name="mfistats" type="data" label="MFI Descriptive Statistics"/>
  </inputs>
  <outputs>
    <data format="html" name="html_file" label="Overview of ${input.name}">
    </data>
  </outputs>

 <help>
   This tool generates an overview of the flow analysis results.
   
-----

**Input**

This tool reads in summary tables from a CrossSample run (tab-separated file containing the counts of events in each population in each file that was run through CrossSample and tab-separated file containing the MFI for each marker in each population in each file.)

**Output**

The output is a page that allows visualization of the data. 

-----

**Example**

*Input*

Population distribution table::

   Filename SampleName Pop1 Pop2 Pop3 ...
   File1    Biosample1 255  147  18   ...
   File2    Biosample2 27   61   965  ...
   File3    Biosample3 201  546  221  ...
   File4    Biosample4 11   77   327  ...

Centroids MFI Summary table::

   Marker1 Marker2 Marker3 ... Population Percentage SampleName
   154     885     24      ... 1          0.2        Biosample1
   458     74      574     ... 2          0.3        Biosample1
   3       210     86      ... 3          0.05       Biosample1
   140     921     19      ... 1          0.1        Biosample2
   428     79      508     ... 2          0.25       Biosample2
   9       225     90      ... 3          0.3        Biosample2
   
MFI Descriptive Stats table::

   Population Marker1_mean Marker1_median Marker1_stdev ... Percentage_mean Percentage_median Percentage_stdev
   1          94.65        90.86          25.8          ... 1.84            0.55              2.48
   2          132.18       131.58         5.02          ... 9.89            9.76              0.33
   3          71.8         69.68          10.53         ... 3.02            1.49              3.45
   4          84.85        84.85          nan           ... 8.52            8.52              nan
   5          161.82       132.77         61.29         ... 0.95            0.37              1.06

*Output*

Summary of the population distribution.

.. image:: ../../static/images/flowtools/popdistrib.png

Stacked area plot of the population distribution in each sample - the user can choose which populations to display.

.. image:: ../../static/images/flowtools/stackedA.png

Stacked bar plot of the population distribution in each sample - the user can choose which populations to display.

.. image:: ../../static/images/flowtools/stackedB.png

Parallel coordinates representation of populations - the user can choose which samples to display and reorder the populations.

.. image:: ../../static/images/flowtools/pcpop.png

Parallel coordinates representation of the data - the user can choose which samples and/or populations to display and reorder the markers.

.. image:: ../../static/images/flowtools/pcmfi.png

 </help>
</tool>

