<tool id="runCrossSample" name="Run Cross Sample" version="1.0">
  <description>using a Flow file that was run using FLOCK</description>
  <command interpreter="python">
    runCrossSample.py -m $mfi -s $stats -t $__tool_directory__ -o crossSampleOutputs
 #for $f in $input#
    -i $f
 #end for#
  </command>

  <inputs>
    <param format="flowtext" name="input" type="data_collection" collection_type="list" label="Flow text files Collection"/>
    <param format="flowmfi" name="mfi" type="data" label="MFI"/>
  </inputs>

  <outputs>
    <collection type="list" label="CrossSample on ${input.name}" name="output">
        <discover_datasets pattern="(?P&lt;name&gt;.*)" directory="crossSampleOutputs" />
    </collection>
    <data format="flowstat" name="stats" label="Summary statistics of CrossSample on ${input.name} using ${mfi.name}"/>
  </outputs>

 <help>
   This tool runs CrossSample using the MFI from FLOCK and text-converted FCS files.
   
-----

**Input**

This tool compares text-converted FCS files from a data collection to the MFI generated by a FLOCK run. The same data collection merged and used to run FLOCK should be used to ensure consistency in the attribution of events to populations

**Output**

Each event is attributed to a given population depending on its intensity profile, for each file of the dataset collection independantly.
A table of the population composition of each file is also generated.

-----

**Example**

*Input text files*::

   Marker1 Marker2 Marker3
   33      47      11
   31      64      11
   21      62      99
   14      34      60

*Input MFI*::

   Population Marker1 Marker2 Marker3
   1          38      49      10
   2          21      63      100
   3          31      52      45
   4          11      78      25

*Output for each text file*::

   Marker1 Marker2 Marker3 Population
   33      47      11      1
   31      64      11      6
   21      62      99      2
   14      34      60      7

*Summary table*::

   Filename Placeholder_sampleName Pop1 Pop2 Pop3 ...
   File1    Biosample1             255  147  18   ...
   File2    Biosample2             27   61   965  ...
   File3    Biosample3             201  546  221  ...
   File4    Biosample4             11   77   327  ...
 </help>
</tool>

