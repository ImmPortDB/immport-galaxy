{"version":3,"file":"popup-menu.js","sources":["../../../src/mvc/ui/popup-menu.js"],"names":["define","PopupMenu","Backbone","View","extend","initialize","$button","options","this","size","$","data","menu","click","event","remove","_renderAndShow","clickEvent","render","$el","appendTo","css","_getShownPosition","show","_setUpCloseBehavior","addClass","hide","position","html","template","attr","length","find","each","i","option","func","children","call","preventDefault","id","_templateOptions","join","_","map","divider","header","href","target","check","menuWidth","width","x","pageX","Math","min","document","scrollLeft","window","max","top","pageY","left","closePopup","off","parent","err","contents","one","addItem","item","index","splice","removeItem","findIndexByHtml","has","findItemByHtml","toString","create","make_popupmenu","button_element","initial_options","convertedOptions","optionVal","optionKey","newOption","jQuery","type","push","convertLinksToOptions","$parent","selector","elem","$link","text","linkHref","linkTarget","confirmText","confirm","location","fromExistingDom","$buttonElement","$menuElement","menuElementLinkSelector","make_popup_menus","menuSelector","buttonSelectorBuildFn","popupMenusCreated","fromDom"],"mappings":"AAAAA,UAGG,WAKH,GAAIC,GAAYC,SAASC,KAAKC,QAK1BC,WAAY,SAAUC,EAASC,GAE3BC,KAAKF,QAAUA,EACVE,KAAKF,QAAQG,SACdD,KAAKF,QAAUI,EAAG,WAEtBF,KAAKD,QAAUA,MACfC,KAAKF,QAAQK,KAAM,YAAaH,KAGhC,IAAII,GAAOJ,IACXA,MAAKF,QAAQO,MAAO,SAAUC,GAI1B,MAFAJ,GAAG,oBAAqBK,SACxBH,EAAKI,eAAgBF,IACd,KAKfE,eAAgB,SAAUC,GACtBT,KAAKU,SACLV,KAAKW,IAAIC,SAAU,QAASC,IAAKb,KAAKc,kBAAmBL,IAAcM,OACvEf,KAAKgB,uBAKTN,OAAQ,WAOJ,GALAV,KAAKW,IAAIM,SAAU,mBAAoBC,OAClCL,KAAMM,SAAW,aACjBC,KAAMpB,KAAKqB,SAAUrB,KAAKF,QAAQwB,KAAM,MAAQtB,KAAKD,UAGtDC,KAAKD,QAAQwB,OAAQ,CACrB,GAAInB,GAAOJ,IAEXA,MAAKW,IAAIa,KAAM,MAAOC,KAAM,SAAUC,GAClC,GAAIC,GAASvB,EAAKL,QAAQ2B,EAGtBC,GAAOC,MACP1B,EAAGF,MAAO6B,SAAU,sBAAuBxB,MAAO,SAAUC,GACxDqB,EAAOC,KAAKE,KAAM1B,EAAME,EAAOqB,GAI/BrB,EAAMyB,qBAMtB,MAAO/B,OAGXqB,SAAW,SAAUW,EAAIjC,GACrB,OACI,WAAYiC,EAAI,gCAAiChC,KAAKiC,iBAAkBlC,GAAW,SACrFmC,KAAM,KAGZD,iBAAmB,SAAUlC,GACzB,MAAKA,GAAQwB,OAGNY,EAAEC,IAAKrC,EAAS,SAAU4B,GAC7B,GAAIA,EAAOU,QACP,MAAO,2BACJ,IAAIV,EAAOW,OACd,OAAS,kDAAmDX,EAAOP,KAAM,aAAcc,KAAM,GAEjG,IAAIK,GAASZ,EAAOY,MAAQ,sBACxBC,EAAWb,EAAe,OAAI,YAAcA,EAAOa,OAAS,IAAM,GAClEC,EAAWd,EAAe,QAAE,oCAAwC,EACxE,QACI,yCAA0CY,EAAM,IAAKC,EAAQ,IACzDC,EAAOd,EAAOP,KAClB,aACFc,KAAM,MACTA,KAAM,IAhBE,yBAoBfpB,kBAAoB,SAAUL,GAG1B,GAAIiC,GAAY1C,KAAKW,IAAIgC,QACrBC,EAAInC,EAAWoC,MAAQH,EAAY,CAKvC,OAFAE,GAAIE,KAAKC,IAAKH,EAAG1C,EAAG8C,UAAWC,aAAe/C,EAAGgD,QAASP,QAAUD,EAAY,GAChFE,EAAIE,KAAKK,IAAKP,EAAG1C,EAAG8C,UAAWC,aAAe,IAE1CG,IAAK3C,EAAW4C,MAChBC,KAAMV,IAMd5B,oBAAqB,WAKjB,QAASuC,KAEL,GADArD,EAAG8C,UAAWQ,IAAK,qBACfN,QAAUA,OAAOO,SAAWP,OAC5B,IACIhD,EAAGgD,OAAOO,OAAOT,UAAWQ,IAAK,qBACnC,MAAOE,QAET,KACIxD,EAAG,sBAAuByD,WAAWH,IAAK,qBAC5C,MAAOE,IAEbtD,EAAKG,SAfT,GAAIH,GAAOJ,IAmBX,IADAE,EAAG,QAAS0D,IAAK,oBAAqBL,GAClCL,QAAUA,OAAOO,SAAWP,OAC5B,IACIhD,EAAGgD,OAAOO,OAAOT,UAAWxB,KAAM,QAASoC,IAAK,oBAAqBL,GACvE,MAAOG,QAET,KACIxD,EAAG,sBAAuByD,WAAWC,IAAK,oBAAqBL,GACjE,MAAOG,MAKjBG,QAAS,SAAUC,EAAMC,GAIrB,MAFAA,GAAUA,GAAS,EAAMA,EAAQ/D,KAAKD,QAAQwB,OAC9CvB,KAAKD,QAAQiE,OAAQD,EAAO,EAAGD,GACxB9D,MAIXiE,WAAY,SAAUF,GAIlB,MAHIA,IAAQ,GACR/D,KAAKD,QAAQiE,OAAQD,EAAO,GAEzB/D,MAIXkE,gBAAiB,SAAU9C,GACvB,IAAK,GAAIM,GAAI,EAAGA,EAAI1B,KAAKD,QAAQwB,OAAQG,IACrC,GAAIS,EAAEgC,IAAKnE,KAAKD,QAAQ2B,GAAI,SAAc1B,KAAKD,QAAQ2B,GAAGN,OAASA,EAC/D,MAAOM,EAGf,OAAO,OAIX0C,eAAgB,SAAUhD,GACtB,MAAOpB,MAAKD,QAAUC,KAAKkE,gBAAiB9C,KAIhDiD,SAAU,WACN,MAAO,cAqIX,OAjIJ5E,GAAU6E,OAAS,SAAkBxE,EAASC,GAC1C,MAAO,IAAIN,GAAWK,EAASC,IAcnCN,EAAU8E,eAAiB,SAAUC,EAAgBC,GACjD,GAAIC,KAgBJ,OAfAvC,GAAEV,KAAMgD,EAAiB,SAAUE,EAAWC,GAC1C,GAAIC,IAAczD,KAAMwD,EAGN,QAAdD,EACAE,EAAUvC,QAAS,EAGiB,aAA7BwC,OAAOC,KAAMJ,KACpBE,EAAUjD,KAAO+C,GAIrBD,EAAiBM,KAAMH,KAEpB,GAAIpF,GAAWS,EAAGsE,GAAkBE,IAS/CjF,EAAUwF,sBAAwB,SAAUC,EAASC,GACjDD,EAAUhF,EAAGgF,GACbC,EAAWA,GAAY,GACvB,IAAIpF,KAoCJ,OAnCAmF,GAAQ1D,KAAM2D,GAAW1D,KAAM,SAAU2D,GACrC,GAAIzD,MAAa0D,EAAQnF,EAAGkF,EAI5B,IADAzD,EAAOP,KAAOiE,EAAMC,OAChBD,EAAM/D,KAAM,QAAU,CACtB,GAAIiE,GAAcF,EAAM/D,KAAM,QAC1BkE,EAAcH,EAAM/D,KAAM,UAC1BmE,EAAcJ,EAAM/D,KAAM,UAE9BK,GAAOC,KAAO,WAGV,IAAI,GAAsB8D,QAASD,GAGnC,OAAQD,GAEJ,IAAK,UACDtC,OAAOO,OAAOkC,SAAWJ,CACzB,MAGJ,KAAK,OACDrC,OAAOE,IAAIuC,SAAWJ,CACtB,MAGJ,SACIrC,OAAOyC,SAAWJ,IAIlCxF,EAAQiF,KAAMrD,KAEX5B,GASXN,EAAUmG,gBAAkB,SAAUC,EAAgBC,EAAcC,GAChEF,EAAiB3F,EAAG2F,GACpBC,EAAe5F,EAAG4F,EAClB,IAAI/F,GAAUN,EAAUwF,sBAAuBa,EAAcC,EAG7D,OADAD,GAAavF,SACN,GAAId,GAAWoG,EAAgB9F,IAW1CN,EAAUuG,iBAAmB,SAAUvC,EAAQwC,EAAcC,GACzDzC,EAASA,GAAUT,SAGnBiD,EAAeA,GAAgB,iBAE/BC,EAAwBA,GAAyB,SAAUJ,GACvD,MAAO,IAAMA,EAAaxE,KAAM,aAIpC,IAAI6E,KAOJ,OANAjG,GAAGuD,GAASjC,KAAMyE,GAAexE,KAAM,WACnC,GAAIqE,GAAkB5F,EAAGF,MACrB6F,EAAkB3F,EAAGuD,GAASjC,KAAM0E,EAAuBJ,EAAcrC,GAC7E0C,GAAkBnB,KAAMvF,EAAU2G,QAASP,EAAgBC,IAC3DD,EAAe5E,SAAU,WAEtBkF,GAKA1G"}