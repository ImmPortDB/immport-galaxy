{"version":3,"file":"history-contents.js","sources":["../../../src/mvc/history/history-contents.js"],"names":["define","HISTORY_CONTENT","HDA_MODEL","HDCA_MODEL","STATES","BASE_MVC","logNamespace","HistoryContents","Backbone","Collection","extend","LoggableMixin","_logNamespace","model","attrs","options","history_content_type","HistoryDatasetAssociation","collection_type","HistoryListDatasetCollection","HistoryPairDatasetCollection","HistoryListPairedDatasetCollection","HistoryListOfListsDatasetCollection","msg","console","warn","validationError","initialize","models","this","historyId","prototype","idAttribute","on","debug","arguments","urlRoot","Galaxy","root","url","ids","map","item","get","notReady","filter","content","inReadyState","running","filterFn","c","getByHid","hid","_","first","getVisible","show_deleted","show_hidden","filters","filteredHdas","isVisible","each","isFunction","hidden","deleted","visibleAndUndeleted","haveDetails","all","hasDetails","fetch","data","defaults","v","call","fetchUpdated","since","traditional","name","value","concat","_filtersFromMap","update_time-ge","toISOString","merge","remove","filterMap","val","key","push","fetchAllDetails","detailsFlag","details","fetchCollectionCounts","keys","join","q","qv","ajaxQueue","ajaxFn","deferred","jQuery","Deferred","startingLength","length","responses","resolve","ajaxFns","chain","reverse","i","xhr","done","response","notify","curr","total","always","shift","isCopyable","contentsJSON","copyableModelClasses","isObject","id","contains","model_class","copy","json","type","contentType","isString","LibraryDatasetDatasetAssociation","HistoryDatasetCollectionAssociation","collection","ajax","method","JSON","stringify","source","add","fail","trigger","matches","matchesWhat","createHDCA","elementIdentifiers","collectionType","contents","typeToModel","list","paired","hdca","history_id","element_identifiers","save","status","message","clone","print","elements","toString"],"mappings":"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"}