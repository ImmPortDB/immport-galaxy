{"version":3,"file":"history-structure-view.js","sources":["../../../src/mvc/history/history-structure-view.js"],"names":["define","JobDAG","JOB","JOB_LI","HISTORY_CONTENT","DATASET_LI","BASE_MVC","logNamespace","window","HistoryStructureComponent","Backbone","View","extend","LoggableMixin","_logNamespace","className","_INITIAL_ZOOM_LEVEL","_MIN_ZOOM_LEVEL","_LINK_ID_SEP","_VERTEX_NAME_DATA_KEY","JobItemClass","JobListItemView","ContentItemClass","DatasetListItemView","initialize","attributes","this","log","component","_liMap","_createVertexItems","zoomLevel","layout","_createLayout","layoutOptions","view","eachVertex","vertex","li","type","data","job","_createJobListItem","_createContentListItem","name","debug","jobData","Job","outputModels","_","map","get","output","src","typeId","typeIdStr","id","model","contents","outputCollection","reset","historyId","tool","listenTo","renderGraph","foldout","content","history_content_type","layoutDefaults","linkSpacing","linkWidth","linkHeight","jobWidth","jobHeight","jobSpacing","linkAdjX","linkAdjY","options","defaults","clone","vertices","values","nodeMap","links","svg","width","height","forEach","v","node","x","y","edges","e","link","source","target","push","render","$el","html","join","$graph","appendTo","$","_render","_updateLayout","css","renderSVG","position","top","left","is","delay","size","each","Math","max","x1","y1","x2","y2","JSON","stringify","highlightConnect","d","d3","select","classed","addClass","unhighlightConnect","removeClass","empty","append","attr","connections","selectAll","enter","on","_connectionPath","CURVE_X","controlY","events","mouseover .graph > .list-item","ev","highlightConnected","currentTarget","mouseout  .graph > .list-item","jobElement","highlight","undefined","jobClassFn","jQuery","prototype","connectionClass","$hoverTarget","call","edge","ancestorId","ancestorLi","eachEdge","descendantId","descendantLi","zoom","level","min","toString","VerticalHistoryStructureComponent","nodeId","CURVE_Y","controlX","HistoryStructureView","_layoutToComponentClass","horizontal","vertical","_DEFAULT_LAYOUT","contains","keys","_processTools","tools","_processJobs","jobs","_createDAG","dag","historyContents","toJSON","excludeSetMetadata","excludeErroredJobs","_createComponents","structure","componentViews","weakComponentGraphArray","componentGraph","_createComponent","ComponentClass","$components","changeLayout","Error"],"mappings":"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"}