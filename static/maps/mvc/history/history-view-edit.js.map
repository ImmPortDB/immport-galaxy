{"version":3,"file":"history-view-edit.js","sources":["../../../src/mvc/history/history-view-edit.js"],"names":["define","HISTORY_VIEW","HISTORY_CONTENTS","STATES","HDA_MODEL","HDA_LI_EDIT","HDCA_LI_EDIT","TAGS","ANNOTATIONS","LIST_COLLECTION_CREATOR","PAIR_COLLECTION_CREATOR","LIST_OF_PAIRS_COLLECTION_CREATOR","faIconButton","PopupMenu","_l","_super","HistoryView","HistoryViewEdit","extend","HDAViewClass","HDAListItemEdit","HDCAViewClass","HDCAListItemEdit","initialize","attributes","prototype","call","this","tagsEditor","annotationEditor","purgeAllowed","annotationEditorShown","tagsEditorShown","_setUpListeners","panel","on","ev","data","dataDropped","dropTargetOff","_renderCounts","_setUpCollectionListeners","listenTo","collection","change:deleted","_handleHdaDeletionChange","change:visible","_handleHdaVisibleChange","change:purged","model","fetch","_setUpModelListeners","updateHistoryDiskSize","_buildNewRender","$newRender","Galaxy","user","id","get","_renderTags","_renderAnnotation","renderItems","$whereTo","views","toggleLink","_class","text","join","$el","deleted","where","hidden","visible","msgs","length","push","showDeleted","showHidden","find","html","$where","TagsEditor","el","onshowFirstTime","render","onshow","toggleHDATagEditors","fxSpeed","onhide","$activator","title","classes","faIcon","appendTo","AnnotationEditor","toggleHDAAnnotationEditors","_setUpBehaviors","isAnonymous","nameSelector","attr","tooltip","placement","make_text_editable","on_finish","newName","previousName","save","name","fail","previous","multiselectActions","actions","func","action","HistoryDatasetAssociation","hide","getSelectedModels","ajaxQueue","unhide","undelete","confirm","purge","concat","_collectionActions","createListCollection","done","refresh","createPairCollection","createListOfPairsCollection","_attachItems","$list","append","reverse","map","view","_attachView","unshift","prepend","trigger","slideDown","_getItemViewOptions","options","_","itemModel","removeItemView","args","Array","slice","arguments","each","toggle","apply","events","clone","click .show-selectors-btn","click .toggle-deleted-link","toggleShowDeleted","click .toggle-hidden-link","toggleShowHidden","dropTargetOn","dropTarget","dropHandlers","dragenter","bind","dragover","dragleave","drop","$dropTarget","_renderDropTarget","before","_renderDropTargetHelp","evName","hasOwnProperty","$","remove","addClass","css","height","margin","border","border-radius","color","font-size","font-style","_dropHandlers","off","dropTargetToggle","preventDefault","stopPropagation","dataTransfer","originalEvent","dropEffect","getData","JSON","parse","err","warn","isObject","model_class","contents","copy","jQuery","when","toString"],"mappings":"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"}