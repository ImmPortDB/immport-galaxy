{"version":3,"file":"library-foldertoolbar-view.js","sources":["../../../src/mvc/library/library-foldertoolbar-view.js"],"names":["define","mod_masthead","mod_utils","mod_toastr","mod_library_model","mod_select","FolderToolbarView","Backbone","View","extend","el","events","click #toolbtn_create_folder","click #toolbtn_bulk_import","click #include_deleted_datasets_chk","click #toolbtn_bulk_delete","click .toolbtn-show-locinfo","click .page_size_prompt","defaults","can_add_library_item","contains_file_or_folder","chain_call_control","total_number","failed_number","disabled_jstree_element","modal","jstree","histories","select_genome","select_extension","list_extensions","auto","id","text","description","list_genomes","initialize","options","this","_","fetchExtAndGenomes","render","toolbar_template","templateToolBar","template_defaults","is_admin","is_anonym","mutiple_add_dataset_options","Galaxy","user","isAdmin","isAnonymous","config","user_library_import_dir","allow_library_path_paste","library_import_dir","$el","html","renderPaginator","paginator_template","templatePaginator","$","find","show_page","parseInt","page_count","total_items_count","items_shown","configureElements","show","hide","tooltip","createFolderFromModal","event","preventDefault","stopPropagation","self","template","templateNewFolderInModal","closing_events","title","body","buttons","Create","create_new_folder_event","Close","folderDetails","serialize_new_folder","validate_new_folder","folder","FolderAsModel","url_items","history","fragment","split","current_folder_id","length","url","urlRoot","save","success","set","type","libraries","folderListView","collection","add","error","model","response","responseJSON","err_msg","name","val","modalBulkImport","checkedValues","info","refreshUserHistoriesList","that","templateBulkImportInModal","models","Import","importAllIntoHistory","callback","GalaxyHistories","fetch","disableButton","new_history_name","post","root","done","new_history","last_used_history_id","processImportToHistory","fail","always","enableButton","history_id","history_name","dataset_ids","folder_ids","each","parentElement","data","classList","contains","push","datasets_to_import","i","library_dataset_id","historyItem","HistoryItem","content","source","library_folder_id","initChainCallControl","action","jQuery","getJSON","chainCallImportingIntoHistory","updateProgress","progress","progressStep","width","Math","round","txt_representation","download","folder_id","format","ld_ids","processDownload","method","param","inputs","pair","appendTo","submit","remove","addFilesFromHistoryModal","template_modal","templateAddFilesFromHistory","folder_name","full_path","Add","addAllDatasetsFromHistory","closing_callback","library_router","back","fetchAndDisplayHistoryContents","change","target","value","importFilesFromPathModal","templateImportPathModal","importFromPathsClicked","navigate","trigger","renderSelectBoxes","get","datatypes","key","extension","description_url","sort","a","b","unshift","cache","genomes","css","container","importFilesFromGalaxyFolderModal","templateBrowserModal","importFromJstreePath","bind","renderJstree","Jstree","require","core","plugins","types","icon","file","checkbox","three_state","err_code","warning","preserve_dirs","is","link_data","file_type","dbkey","paths","valid_paths","trimmed","trim","chainCallImportingFolders","templateAddingDatasetsProgressBar","templateDeletingItemsProgressBar","templateImportIntoHistoryProgressBar","emit","all_nodes","get_selected","selected_nodes","filter","node","state","disabled","selection_type","undefined","li_attr","full_source","chainCallImportingUserdirFiles","history_contents","HistoryContents","history_contents_template","templateHistoryContents","contents","reverse","checked_hdas","history_dataset_ids","hdas_to_add","hid","history_dataset_id","folder_item","Item","from_hda_id","chainCallAddingHdas","history_item_set","popped_item","pop","onclick","window","location","promise","when","hdas_set","added_hdas","Folder","chainCallDeletingItems","items_to_delete","deleted_items","destroy","item","include_deleted","updated_item","model_class","checkIncludeDeleted","fetchFolder","checked","deleteSelectedItems","substring","items_total","dataset","showLocInfo","library","libraryListView","parent_library_id","showLocInfoModal","Library","templateLocInfoInModal","showImportModal","showPageSizePrompt","folder_page_size","prompt","preferences","join"],"mappings":"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,QAAUT,GAAIM,KAAKD,QAAQL,GAAI+B,UAAW,MAIhFpB,gBAAiB,WACf,MAAOJ,GAAEsC,UAET,wCAEE,6BACE,yCACE,+CAEA,2DACA,sGACE,UACE,mFACF,WACF,SACA,qNACE,qEACF,YACA,0CACA,kEACE,oIACE,8FACF,YACA,yCACE,yEACA,6DACE,gFACF,UACA,qDACE,4BACA,+CACA,wDACE,mFACF,UACA,qDACE,kEACF,UACF,UACF,QACF,SACA,iBACE,0LACE,mEACF,OACF,UACA,iOACE,mCACA,mBACF,YACA,0FACE,kIACE,4EACF,YACA,yCACE,kEACA,kEACA,+DACF,QACF,SACE,+NACA,oDACA,8LACE,0CACA,gBACF,YACA,qGACE,gGACE,gDACE,8CACA,aACF,YACF,OACF,UACF,SACF,UAEF,kCACA,SAEA,wDAEF,UACEsO,KAAK,MAGTN,uBAAwB,WACtB,MAAOtQ,GAAEsC,UACP,QACE,6CACE,UACE,uCACA,YACF,WACA,UACE,OACE,gBACA,sCACF,QACA,gDACE,OACE,uBACA,6CACF,QACF,UACA,6CACE,OACE,oBACA,0CACF,QACF,UACA,uDACE,OACE,mBACA,2GACF,QACF,UACA,OACE,cACA,oCACF,QACF,WACF,WACA,6CACE,UACE,sCACA,YACF,WACA,UACE,OACE,gBACA,sCACF,QACA,gDACE,OACE,uBACA,6CACF,QACF,UACA,OACE,cACA,6BACF,QACA,WACJ,WACJ,UACEsO,KAAK,MAGTrO,yBAA0B,WACxB,MAAOvC,GAAEsC,UACT,8BACE,SACE,wEACA,4EACF,UACF,UACEsO,KAAK,MAIT5L,0BAA4B,WAC1B,MAAOhF,GAAEsC,UACT,QACE,mCACE,mBACA,iHACE,8CACE,mGACF,YACF,YACF,SACA,mCACE,kBACA,4GACA,WACF,SACF,UACEsO,KAAK,MAGTnE,qCAAuC,WACrC,MAAOzM,GAAEsC,UACT,4BACE,2EACF,SACA,yBACE,gJACE,mDACF,SACF,UACEsO,KAAK,MAGTrE,kCAAmC,WACjC,MAAOvM,GAAEsC,UACT,4BACE,iFACF,SACA,yBACE,gJACE,mDACF,SACF,UACEsO,KAAK,MAGTpE,iCAAkC,WAChC,MAAOxM,GAAEsC,UACT,4BACA,SACA,yBACE,gJACE,mDACF,SACF,UACEsO,KAAK,MAGT9F,qBAAsB,WACpB,MAAO9K,GAAEsC,UACT,gCACE,0JACA,wLACA,mCACE,oFACE,yGACF,WACA,sFACA,uFACA,WACF,SACA,mCACE,kFACE,yFACA,+BACF,WACA,0EACE,mEACA,gCACF,WACF,SACA,qGACE,aACF,YACA,qGACE,cACF,YACA,SAEA,4BACA,SACA,SACA,kFACA,QACE,gFACA,4EACA,SACJ,UACEsO,KAAK,MAGTjH,wBAAyB,WACvB,MAAO3J,GAAEsC,UACT,gCACE,+JACA,sCACE,4DACE,yFACA,+BACF,WACA,oDACE,mEACA,gCACF,WACF,SACA,uKACA,SACA,kFACA,QACE,gFACA,4EACF,SACF,UACEsO,KAAK,MAGT9H,4BAA6B,WAC3B,MAAO9I,GAAEsC,UACT,6BACE,QACE,oBACA,8EACE,8CACE,mGACF,YACF,YACF,SACA,QACA,sCACA,SACF,UACEsO,KAAK,MAGTlD,wBAAyB;AACvB,MAAO1N,GAAEsC,UACT,kDACA,OACE,0DACE,yDACE,iIACF,QACF,YACF,SACEsO,KAAK,MAGTvP,kBAAmB,WACjB,MAAOrB,GAAEsC,UACT,wCACE,uCACE,gDACE,iGACA,wHACF,iBACE,iGACA,2GACF,UACF,iBACE,kHACA,wHACF,UACA,sBACE,0FACF,QACA,4CACE,2GACA,0HACF,iBACE,yHACA,2IACF,UACF,QACA,SACE,sBACA,8HACE,qBACF,OACA,0CACF,WACEsO,KAAK,OAKX,QACI7S,kBAAmBA"}