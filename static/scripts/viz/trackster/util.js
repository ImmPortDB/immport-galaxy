define("viz/trackster/util",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Backbone.Model.extend({defaults:{ajax_settings:{},interval:1e3,success_fn:function(e){return!0}},go:function(){var e=$.Deferred(),t=this,r=t.get("ajax_settings"),n=t.get("success_fn"),a=t.get("interval");return function t(){$.ajax(r).success(function(r){n(r)?e.resolve(r):setTimeout(t,a)})}(),e}});e.default={commatize:function(e){e+="";for(var t=/(\d+)(\d{3})/;t.test(e);)e=e.replace(t,"$1,$2");return e},is_deferred:function(e){return"promise"in e},ServerStateDeferred:t,get_random_color:function(e){e||(e="#ffffff"),"string"==typeof e&&(e=[e]);for(var t=0;t<e.length;t++)e[t]=parseInt(e[t].slice(1),16);var r,n,a,i,o,s,f,u,c,d,l,h=function(e,t,r){return(299*e+587*t+114*r)/1e3},m=!1,g=0;do{for(c=h(n=(16711680&(r=Math.round(16777215*Math.random())))>>16,a=(65280&r)>>8,i=255&r),m=!0,t=0;t<e.length;t++)if(o=e[t],s=(16711680&o)>>16,f=(65280&o)>>8,u=255&o,d=h(s,f,u),l=function(e,t,r,n,a,i){return Math.max(e,n)-Math.min(e,n)+(Math.max(t,a)-Math.min(t,a))+(Math.max(r,i)-Math.min(r,i))}(n,a,i,s,f,u),Math.abs(c-d)<40||l<200){m=!1;break}g++}while(!m&&g<=10);return"#"+(16777216+r).toString(16).substr(1,6)}}});