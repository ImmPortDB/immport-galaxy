define([],function(){"use strict";function n(n,t){if("number"!=typeof n||"number"!=typeof t)throw"Bad range "+n+","+t;this._min=n,this._max=t}function t(n){var t=n.sort(r),i=[],e=t.shift();t.forEach(function(n){n._min<=e._max?n._max>e._max&&(e._max=n._max):(i.push(e),e=n)}),i.push(e),this._ranges=i}function r(n,t){return n._min<t._min?-1:n._min>t._min?1:n._max<t._max?-1:t._max>n._max?1:0}return n.prototype.min=function(){return this._min},n.prototype.max=function(){return this._max},n.prototype.contains=function(n){return n>=this._min&&n<=this._max},n.prototype.isContiguous=function(){return!0},n.prototype.ranges=function(){return[this]},n.prototype._pushRanges=function(n){n.push(this)},n.prototype.toString=function(){return"["+this._min+"-"+this._max+"]"},t.prototype.min=function(){return this._ranges[0].min()},t.prototype.max=function(){return this._ranges[this._ranges.length-1].max()},t.prototype.lower_bound=function(n){var t=this.ranges();if(n>this.max())return t.length;if(n<this.min())return 0;for(var r=0,i=t.length-1;r<=i;){var e=Math.floor((r+i)/2);if(n>t[e]._max)r=e+1;else{if(!(n<t[e]._min))return e;i=e-1}}return r},t.prototype.contains=function(n){var t=this.lower_bound(n);return!!(t<this._ranges.length&&this._ranges[t].contains(n))},t.prototype.insertRange=function(n){var t=this.lower_bound(n._min);if(t!==this._ranges.length){var r=this.ranges();if(n._max<r[t]._min)this._ranges.splice(t,0,n);else{r[t]._min<n._min&&(n._min=r[t]._min);for(var i=t+1;i<r.length&&r[i]._min<=n._max;)i++;r[--i]._max>n._max&&(n._max=r[i]._max),this._ranges.splice(t,i-t+1,n)}}else this._ranges.push(n)},t.prototype.isContiguous=function(){return this._ranges.length>1},t.prototype.ranges=function(){return this._ranges},t.prototype._pushRanges=function(n){for(var t=0;t<this._ranges.length;++t)n.push(this._ranges[t])},t.prototype.toString=function(){for(var n="",t=0;t<this._ranges.length;++t)t>0&&(n+=","),n+=this._ranges[t].toString();return n},{Range:n,union:function(n,r){return n instanceof t||(n instanceof Array||(n=[n]),n=new t(n)),r&&n.insertRange(r),n},intersection:function(r,i){for(var e=r.ranges(),a=i.ranges(),o=e.length,s=a.length,u=0,m=0,h=[];u<o&&m<s;){var r=e[u],i=a[m],_=Math.max(r.min(),i.min()),g=Math.min(r.max(),i.max());g>=_&&h.push(new n(_,g)),r.max()>i.max()?++m:++u}return 0==h.length?null:1==h.length?h[0]:new t(h)},coverage:function(n){for(var t=0,r=n.ranges(),i=0;i<r.length;++i){var e=r[i];t+=e.max()-e.min()+1}return t},rangeOver:function(n,t){return n.min()<t.min()?-1:n.min()>t.min()?1:n.max()<t.max()?-1:t.max()>n.max()?1:0},_rangeOrder:r}});