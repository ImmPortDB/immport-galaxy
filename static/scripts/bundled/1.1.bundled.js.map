{"version":3,"sources":["webpack:///1.1.bundled.js","webpack:///./galaxy/scripts/mvc/dataset/data.js?f841","webpack:///./galaxy/scripts/mvc/ui/icon-button.js?40a6"],"names":["webpackJsonp",11,"module","exports","__webpack_require__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","Backbone","_","$","Modal","Frames","mod_icon_btn","DatasetMetadata","Model","extend","Dataset","defaults","id","type","name","hda_ldda","metadata","initialize","this","get","_set_metadata","on","each","keys","attributes","k","indexOf","new_key","split","set","silent","get_metadata","attribute","urlRoot","Galaxy","root","TabularDataset","prototype","chunk_url","first_data_chunk","chunk_index","at_eof","options","call","url_viz","get_next_chunk","self","next_chunk","Deferred","getJSON","chunk","success","rval","ck_data","resolve","DatasetCollection","Collection","model","TabularDatasetChunkedView","View","row_count","loading_chunk","TabularButtonTracksterView","$el","expand_to_container","height","scroll_elt","attempt_to_fetch","func","scrolled_to_bottom","loading_indicator","show","when","then","result","_renderChunk","hide","render","attr","append","data_table","cellpadding","column_names","header_container","appendTo","header_row","join","j","first_chunk","scroll","_renderCell","cell_contents","index","colspan","$cell","text","column_types","undefined","addClass","length","_renderRow","line","cells","row","num_columns","slice","find","TopLevelTabularDatasetChunkedView","parents","p","css","window","scrollTop","EmbeddedTabularDatasetChunkedView","position","overflow","innerHeight","el","scrollHeight","col","chrom","start","end","dataset_id","genome_build","file_ext","search","str","array","match","parent","modal","frame","console","log","btn_viz","IconButtonView","IconButton","title","icon_class","setElement","events","mouseover tr","mouseleave","e","is_numeric","n","isNaN","parseFloat","isFinite","target","children","eq","html","btn_viz_pars","gene_region","offset","left","top","off","click","create_trackster_action","vis_url","dataset_params","dbkey","listTracksParams","ajax","url","param","dataType","error","body","buttons","Cancel","table_html","View in saved visualization","Add to visualization","vis_id","val","add","content","View in new visualization","createTabularDatasetChunkedView","dataset_config","parent_elt","embedded","view","apply",15,"on_click","menu_options","is_menu_button","href","enabled","visible","tooltip_config","placement","bind","tooltip","new_elem","template","toJSON","replaceWith","event","isFunction","buffer","IconButtonCollection","IconButtonMenuView","tagName","collection","button","elt","make_popupmenu","create_icon_buttons_menu","config","global_config","map","button_config"],"mappings":"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","file":"1.1.bundled.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 11:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, _, $) {// Additional dependencies: jQuery, underscore.\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(8), __webpack_require__(24), __webpack_require__(15)], __WEBPACK_AMD_DEFINE_RESULT__ = function(Modal, Frames, mod_icon_btn) {\n\t\n\t/**\n\t * Dataset metedata.\n\t */\n\tvar DatasetMetadata = Backbone.Model.extend({});\n\t\n\t/**\n\t * A dataset. In Galaxy, datasets are associated with a history, so\n\t * this object is also known as a HistoryDatasetAssociation.\n\t */\n\tvar Dataset = Backbone.Model.extend({\n\t    defaults: {\n\t        id: '',\n\t        type: '',\n\t        name: '',\n\t        hda_ldda: 'hda',\n\t        metadata: null\n\t    },\n\t\n\t    initialize: function() {\n\t        // Metadata can be passed in as a model or a set of attributes; if it's\n\t        // already a model, there's no need to set metadata.\n\t        if (!this.get('metadata')) {\n\t            this._set_metadata();\n\t        }\n\t\n\t        // Update metadata on change.\n\t        this.on('change', this._set_metadata, this);\n\t    },\n\t\n\t    _set_metadata: function() {\n\t        var metadata = new DatasetMetadata();\n\t\n\t        // Move metadata from dataset attributes to metadata object.\n\t        _.each(_.keys(this.attributes), function(k) {\n\t            if (k.indexOf('metadata_') === 0) {\n\t                // Found metadata.\n\t                var new_key = k.split('metadata_')[1];\n\t                metadata.set(new_key, this.attributes[k]);\n\t                delete this.attributes[k];\n\t            }\n\t        }, this);\n\t\n\t        // Because this is an internal change, silence it.\n\t        this.set('metadata', metadata, { 'silent': true });\n\t    },\n\t\n\t    /**\n\t     * Returns dataset metadata for a given attribute.\n\t     */\n\t    get_metadata: function(attribute) {\n\t        return this.attributes.metadata.get(attribute);\n\t    },\n\t\n\t    urlRoot: Galaxy.root + \"api/datasets\"\n\t});\n\t\n\t/**\n\t * A tabular dataset. This object extends dataset to provide incremental chunked data.\n\t */\n\tvar TabularDataset = Dataset.extend({\n\t    defaults: _.extend({}, Dataset.prototype.defaults, {\n\t        chunk_url: null,\n\t        first_data_chunk: null,\n\t        chunk_index: -1,\n\t        at_eof: false\n\t    }),\n\t\n\t    initialize: function(options) {\n\t        Dataset.prototype.initialize.call(this);\n\t\n\t        // If first data chunk is available, next chunk is 1.\n\t        this.attributes.chunk_index = (this.attributes.first_data_chunk ? 1 : 0);\n\t        this.attributes.chunk_url = Galaxy.root + 'dataset/display?dataset_id=' + this.id;\n\t        this.attributes.url_viz = Galaxy.root + 'visualization';\n\t    },\n\t\n\t    /**\n\t     * Returns a jQuery Deferred object that resolves to the next data chunk or null if at EOF.\n\t     */\n\t    get_next_chunk: function() {\n\t        // If already at end of file, do nothing.\n\t        if (this.attributes.at_eof) {\n\t            return null;\n\t        }\n\t\n\t        // Get next chunk.\n\t        var self = this,\n\t            next_chunk = $.Deferred();\n\t        $.getJSON(this.attributes.chunk_url, {\n\t            chunk: self.attributes.chunk_index++\n\t        }).success(function(chunk) {\n\t            var rval;\n\t            if (chunk.ck_data !== '') {\n\t                // Found chunk.\n\t                rval = chunk;\n\t            }\n\t            else {\n\t                // At EOF.\n\t                self.attributes.at_eof = true;\n\t                rval = null;\n\t            }\n\t            next_chunk.resolve(rval);\n\t        });\n\t\n\t        return next_chunk;\n\t    }\n\t});\n\t\n\tvar DatasetCollection = Backbone.Collection.extend({\n\t    model: Dataset\n\t});\n\t\n\t/**\n\t * Provides a base for table-based, dynamic view of a tabular dataset.\n\t * Do not instantiate directly; use either TopLevelTabularDatasetChunkedView\n\t * or EmbeddedTabularDatasetChunkedView.\n\t */\n\tvar TabularDatasetChunkedView = Backbone.View.extend({\n\t\n\t    /**\n\t     * Initialize view and, importantly, set a scroll element.\n\t     */\n\t    initialize: function(options) {\n\t        // Row count for rendering.\n\t        this.row_count = 0;\n\t        this.loading_chunk = false;\n\t\n\t        // load trackster button\n\t        new TabularButtonTracksterView({\n\t            model   : options.model,\n\t            $el     : this.$el\n\t        });\n\t    },\n\t\n\t    expand_to_container: function(){\n\t        if (this.$el.height() < this.scroll_elt.height()){\n\t            this.attempt_to_fetch();\n\t        }\n\t    },\n\t\n\t    attempt_to_fetch: function( func ){\n\t        var self = this;\n\t        if ( !this.loading_chunk && this.scrolled_to_bottom() ) {\n\t            this.loading_chunk = true;\n\t            this.loading_indicator.show();\n\t            $.when(self.model.get_next_chunk()).then(function(result) {\n\t                if (result) {\n\t                    self._renderChunk(result);\n\t                    self.loading_chunk = false;\n\t                }\n\t                self.loading_indicator.hide();\n\t                self.expand_to_container();\n\t            });\n\t        }\n\t    },\n\t\n\t    render: function() {\n\t        // Add loading indicator.\n\t        this.loading_indicator = $('<div/>').attr('id', 'loading_indicator');\n\t        this.$el.append(this.loading_indicator);\n\t\n\t        // Add data table and header.\n\t        var data_table = $('<table/>').attr({\n\t            id: 'content_table',\n\t            cellpadding: 0\n\t        });\n\t        this.$el.append(data_table);\n\t        var column_names = this.model.get_metadata('column_names'),\n\t            header_container = $('<thead/>').appendTo(data_table),\n\t            header_row = $('<tr/>').appendTo(header_container);\n\t        if (column_names) {\n\t            header_row.append('<th>' + column_names.join('</th><th>') + '</th>');\n\t        } else {\n\t            for (var j = 1; j <= this.model.get_metadata('columns'); j++) {\n\t                header_row.append('<th>' + j + '</th>');\n\t            }\n\t        }\n\t\n\t        // Render first chunk.\n\t        var self = this,\n\t            first_chunk = this.model.get('first_data_chunk');\n\t        if (first_chunk) {\n\t            // First chunk is bootstrapped, so render now.\n\t            this._renderChunk(first_chunk);\n\t        }\n\t        else {\n\t            // No bootstrapping, so get first chunk and then render.\n\t            $.when(self.model.get_next_chunk()).then(function(result) {\n\t                self._renderChunk(result);\n\t            });\n\t        }\n\t\n\t        // -- Show new chunks during scrolling. --\n\t\n\t        // Set up chunk loading when scrolling using the scrolling element.\n\t        this.scroll_elt.scroll(function(){\n\t            self.attempt_to_fetch();\n\t        });\n\t    },\n\t\n\t    /**\n\t     * Returns true if user has scrolled to the bottom of the view.\n\t     */\n\t    scrolled_to_bottom: function() {\n\t        return false;\n\t    },\n\t\n\t    // -- Helper functions. --\n\t\n\t    _renderCell: function(cell_contents, index, colspan) {\n\t        var $cell = $('<td>').text(cell_contents);\n\t        var column_types = this.model.get_metadata('column_types');\n\t        if (colspan !== undefined) {\n\t            $cell.attr('colspan', colspan).addClass('stringalign');\n\t        } else if (column_types) {\n\t            if (index < column_types.length) {\n\t                if (column_types[index] === 'str' || column_types[index] === 'list') {\n\t                    /* Left align all str columns, right align the rest */\n\t                    $cell.addClass('stringalign');\n\t                }\n\t            }\n\t        }\n\t        return $cell;\n\t    },\n\t\n\t    _renderRow: function(line) {\n\t        // Check length of cells to ensure this is a complete row.\n\t        var cells = line.split('\\t'),\n\t            row = $('<tr>'),\n\t            num_columns = this.model.get_metadata('columns');\n\t\n\t        if (this.row_count % 2 !== 0) {\n\t            row.addClass('dark_row');\n\t        }\n\t\n\t        if (cells.length === num_columns) {\n\t            _.each(cells, function(cell_contents, index) {\n\t                row.append(this._renderCell(cell_contents, index));\n\t            }, this);\n\t        }\n\t        else if (cells.length > num_columns) {\n\t            // SAM file or like format with optional metadata included.\n\t            _.each(cells.slice(0, num_columns - 1), function(cell_contents, index) {\n\t                row.append(this._renderCell(cell_contents, index));\n\t            }, this);\n\t            row.append(this._renderCell(cells.slice(num_columns - 1).join('\\t'), num_columns - 1));\n\t        }\n\t        else if (num_columns > 5 && cells.length === num_columns - 1 ) {\n\t            // SAM file or like format with optional metadata missing.\n\t            _.each(cells, function(cell_contents, index) {\n\t                row.append(this._renderCell(cell_contents, index));\n\t            }, this);\n\t            row.append($('<td>'));\n\t        }\n\t        else {\n\t            // Comment line, just return the one cell.\n\t            row.append(this._renderCell(line, 0, num_columns));\n\t        }\n\t\n\t        this.row_count++;\n\t        return row;\n\t    },\n\t\n\t    _renderChunk: function(chunk) {\n\t        var data_table = this.$el.find('table');\n\t        _.each(chunk.ck_data.split('\\n'), function(line, index) {\n\t            if (line !== ''){\n\t                data_table.append(this._renderRow(line));\n\t            }\n\t        }, this);\n\t    }\n\t});\n\t\n\t/**\n\t * Tabular view that is placed at the top level of page. Scrolling occurs\n\t * view top-level elements outside of view.\n\t */\n\tvar TopLevelTabularDatasetChunkedView = TabularDatasetChunkedView.extend({\n\t\n\t    initialize: function(options) {\n\t        TabularDatasetChunkedView.prototype.initialize.call(this, options);\n\t\n\t        // Scrolling happens in top-level elements.\n\t        scroll_elt = _.find(this.$el.parents(), function(p) {\n\t            return $(p).css('overflow') === 'auto';\n\t        });\n\t\n\t        // If no scrolling element found, use window.\n\t        if (!scroll_elt) { scroll_elt = window; }\n\t\n\t        // Wrap scrolling element for easy access.\n\t        this.scroll_elt = $(scroll_elt);\n\t    },\n\t\n\t    /**\n\t     * Returns true if user has scrolled to the bottom of the view.\n\t     */\n\t    scrolled_to_bottom: function() {\n\t        return (this.$el.height() - this.scroll_elt.scrollTop() - this.scroll_elt.height() <= 0);\n\t    }\n\t\n\t});\n\t\n\t/**\n\t * Tabular view tnat is embedded in a page. Scrolling occurs in view's el.\n\t */\n\tvar EmbeddedTabularDatasetChunkedView = TabularDatasetChunkedView.extend({\n\t\n\t    initialize: function(options) {\n\t        TabularDatasetChunkedView.prototype.initialize.call(this, options);\n\t\n\t        // Because view is embedded, set up div to do scrolling.\n\t        this.scroll_elt = this.$el.css({\n\t            position: 'relative',\n\t            overflow: 'scroll',\n\t            height: options.height || '500px'\n\t        });\n\t    },\n\t\n\t    /**\n\t     * Returns true if user has scrolled to the bottom of the view.\n\t     */\n\t    scrolled_to_bottom: function() {\n\t        return this.$el.scrollTop() + this.$el.innerHeight() >= this.el.scrollHeight;\n\t    }\n\t\n\t});\n\t\n\t// button for trackster visualization\n\tvar TabularButtonTracksterView = Backbone.View.extend({\n\t\n\t    // gene region columns\n\t    col: {\n\t        chrom   : null,\n\t        start   : null,\n\t        end     : null\n\t    },\n\t\n\t    // url for trackster\n\t    url_viz     : null,\n\t\n\t    // dataset id\n\t    dataset_id  : null,\n\t\n\t    // database key\n\t    genome_build: null,\n\t\n\t    // data type\n\t    file_ext   : null,\n\t\n\t    // backbone initialize\n\t    initialize: function (options) {\n\t        // check if environment is available\n\t        var Galaxy = parent.Galaxy;\n\t\n\t        // link galaxy modal or create one\n\t        if (Galaxy && Galaxy.modal) {\n\t            this.modal = Galaxy.modal;\n\t        }\n\t\n\t        // link galaxy frames\n\t        if (Galaxy && Galaxy.frame) {\n\t            this.frame = Galaxy.frame;\n\t        }\n\t\n\t        // check\n\t        if (!this.modal || !this.frame) {\n\t            return;\n\t        }\n\t\n\t        // model/metadata\n\t        var model       = options.model;\n\t        var metadata    = model.get('metadata');\n\t\n\t        // check for datatype\n\t        if (!model.get('file_ext')) {\n\t            return;\n\t        }\n\t\n\t        // get data type\n\t        this.file_ext = model.get('file_ext');\n\t\n\t        // check for bed-file format\n\t        if (this.file_ext == 'bed')\n\t        {\n\t            // verify that metadata exists\n\t            if (metadata.get('chromCol') && metadata.get('startCol') && metadata.get('endCol'))\n\t            {\n\t                // read in columns\n\t                this.col.chrom   = metadata.get('chromCol') - 1;\n\t                this.col.start   = metadata.get('startCol') - 1;\n\t                this.col.end     = metadata.get('endCol') - 1;\n\t            } else {\n\t                console.log('TabularButtonTrackster : Bed-file metadata incomplete.');\n\t                return;\n\t            }\n\t        }\n\t\n\t        // check for vcf-file format\n\t        if (this.file_ext == 'vcf')\n\t        {\n\t            // search array\n\t            function search (str, array) {\n\t                for (var j = 0; j < array.length; j++)\n\t                    if (array[j].match(str)) return j;\n\t                return -1;\n\t            };\n\t\n\t            // load\n\t            this.col.chrom = search('Chrom', metadata.get('column_names'));\n\t            this.col.start = search('Pos', metadata.get('column_names'));\n\t            this.col.end   = null;\n\t\n\t            // verify that metadata exists\n\t            if (this.col.chrom == -1 || this.col.start == -1) {\n\t                console.log('TabularButtonTrackster : VCF-file metadata incomplete.');\n\t                return;\n\t            }\n\t        }\n\t\n\t        // check\n\t        if(this.col.chrom === undefined) {\n\t            return;\n\t        }\n\t\n\t        // get dataset id\n\t        if (model.id) {\n\t            this.dataset_id = model.id;\n\t        } else {\n\t            console.log('TabularButtonTrackster : Dataset identification is missing.');\n\t            return;\n\t        }\n\t\n\t        // get url\n\t        if (model.get('url_viz')) {\n\t            this.url_viz = model.get('url_viz');\n\t        } else {\n\t            console.log('TabularButtonTrackster : Url for visualization controller is missing.');\n\t            return;\n\t        }\n\t\n\t        // get genome_build / database key\n\t        if (model.get('genome_build')) {\n\t            this.genome_build = model.get('genome_build');\n\t        }\n\t\n\t        // create the icon\n\t        var btn_viz = new mod_icon_btn.IconButtonView({\n\t            model : new mod_icon_btn.IconButton({\n\t                title       : 'Visualize',\n\t                icon_class  : 'chart_curve',\n\t                id          : 'btn_viz'\n\t            })\n\t        });\n\t\n\t        // set element\n\t        this.setElement(options.$el);\n\t\n\t        // add to element\n\t        this.$el.append(btn_viz.render().$el);\n\t\n\t        // hide the button\n\t        this.hide();\n\t    },\n\t\n\t    // backbone events\n\t    events:\n\t    {\n\t        'mouseover tr'  : 'show',\n\t        'mouseleave'    : 'hide'\n\t    },\n\t\n\t    // show button\n\t    show: function (e) {\n\t        // is numeric\n\t        function is_numeric(n) {\n\t            return !isNaN(parseFloat(n)) && isFinite(n);\n\t        };\n\t\n\t        // check\n\t        if(this.col.chrom === null)\n\t            return;\n\t\n\t        // get selected data line\n\t        var row = $(e.target).parent();\n\t\n\t        // verify that location has been found\n\t        var chrom = row.children().eq(this.col.chrom).html();\n\t        var start = row.children().eq(this.col.start).html();\n\t\n\t        // end is optional\n\t        var end = this.col.end ? row.children().eq(this.col.end).html() : start;\n\t\n\t        // double check location\n\t        if (!chrom.match(\"^#\") && chrom !== \"\" && is_numeric(start)) {\n\t\n\t            // get target gene region\n\t            var btn_viz_pars = {\n\t                dataset_id  : this.dataset_id,\n\t                gene_region : chrom + \":\" + start + \"-\" + end\n\t            };\n\t\n\t            // get button position\n\t            var offset  = row.offset();\n\t            var left    = offset.left - 10;\n\t            var top     = offset.top - $(window).scrollTop() + 3;\n\t\n\t            // update css\n\t            $('#btn_viz').css({'position': 'fixed', 'top': top + 'px', 'left': left + 'px'});\n\t            $('#btn_viz').off('click');\n\t            $('#btn_viz').click(this.create_trackster_action(this.url_viz, btn_viz_pars, this.genome_build));\n\t\n\t            // show the button\n\t            $('#btn_viz').show();\n\t        } else {\n\t            // hide the button\n\t            $('#btn_viz').hide();\n\t        }\n\t    },\n\t\n\t    // hide button\n\t    hide: function () {\n\t        this.$el.find('#btn_viz').hide();\n\t    },\n\t\n\t    // create action\n\t    create_trackster_action : function (vis_url, dataset_params, dbkey) {\n\t        // link this\n\t        var self = this;\n\t\n\t        // create function\n\t        return function() {\n\t            var listTracksParams = {};\n\t            if (dbkey) {\n\t                listTracksParams[ 'f-dbkey' ] = dbkey;\n\t            }\n\t            $.ajax({\n\t                url: vis_url + '/list_tracks?' + $.param( listTracksParams ),\n\t                dataType: 'html',\n\t                error: function() {\n\t                    // show error message\n\t                    self.modal.show({\n\t                        title   : 'Something went wrong!',\n\t                        body    : 'Unfortunately we could not add this dataset to the track browser. Please try again or contact us.',\n\t                        buttons : {\n\t                            'Cancel': function(){\n\t                                self.modal.hide();\n\t                            }\n\t                        }\n\t                    });\n\t                },\n\t                success: function(table_html) {\n\t                    self.modal.show({\n\t                        title   : 'View Data in a New or Saved Visualization',\n\t                        buttons :{\n\t                            'Cancel': function(){\n\t                                self.modal.hide();\n\t                            },\n\t                            'View in saved visualization': function(){\n\t                                // show modal with saved visualizations\n\t                                self.modal.show(\n\t                                {\n\t                                    title   : 'Add Data to Saved Visualization',\n\t                                    body    : table_html,\n\t                                    buttons : {\n\t                                        'Cancel': function(){\n\t                                            self.modal.hide();\n\t                                        },\n\t                                        'Add to visualization': function(){\n\t                                            // hide\n\t                                            self.modal.hide();\n\t\n\t                                            // search selected fields\n\t                                            self.modal.$el.find('input[name=id]:checked').each(function(){\n\t                                                // get visualization id\n\t                                                var vis_id = $(this).val();\n\t                                                dataset_params.id = vis_id;\n\t\n\t                                                // add widget\n\t                                                self.frame.add({\n\t                                                    title    : 'Trackster',\n\t                                                    type     : 'url',\n\t                                                    content  : vis_url + '/trackster?' + $.param(dataset_params)\n\t                                                });\n\t                                            });\n\t                                        }\n\t                                    }\n\t                                });\n\t                            },\n\t                            'View in new visualization': function(){\n\t                                // hide\n\t                                self.modal.hide();\n\t\n\t                                // add widget\n\t                                self.frame.add({\n\t                                    title    : 'Trackster',\n\t                                    type     : 'url',\n\t                                    content  : vis_url + '/trackster?' + $.param(dataset_params)\n\t                                });\n\t                            }\n\t                        }\n\t                    });\n\t                }\n\t            });\n\t            return false;\n\t        };\n\t    }\n\t});\n\t\n\t// -- Utility functions. --\n\t\n\t/**\n\t * Create a model, attach it to a view, render view, and attach it to a parent element.\n\t */\n\tvar createModelAndView = function(model, view, model_config, parent_elt) {\n\t    // Create model, view.\n\t    var a_view = new view({\n\t        model: new model(model_config)\n\t    });\n\t\n\t    // Render view and add to parent element.\n\t    a_view.render();\n\t    if (parent_elt) {\n\t        parent_elt.append(a_view.$el);\n\t    }\n\t\n\t    return a_view;\n\t};\n\t\n\t/**\n\t * Create a tabular dataset chunked view (and requisite tabular dataset model)\n\t * and appends to parent_elt.\n\t */\n\tvar createTabularDatasetChunkedView = function(options) {\n\t    // If no model, create and set model from dataset config.\n\t    if (!options.model) {\n\t        options.model = new TabularDataset(options.dataset_config);\n\t    }\n\t\n\t    var parent_elt = options.parent_elt;\n\t    var embedded = options.embedded;\n\t\n\t    // Clean up options so that only needed options are passed to view.\n\t    delete options.embedded;\n\t    delete options.parent_elt;\n\t    delete options.dataset_config;\n\t\n\t    // Create and set up view.\n\t    var view = (embedded ? new EmbeddedTabularDatasetChunkedView(options) :\n\t                           new TopLevelTabularDatasetChunkedView(options));\n\t    view.render();\n\t\n\t    if (parent_elt) {\n\t        parent_elt.append(view.$el);\n\t        // If we're sticking this in another element, once it's appended check\n\t        // to make sure we've filled enough space.\n\t        // Without this, the scroll elements don't work.\n\t        view.expand_to_container();\n\t    }\n\t\n\t    return view;\n\t};\n\t\n\treturn {\n\t    Dataset: Dataset,\n\t    TabularDataset: TabularDataset,\n\t    DatasetCollection: DatasetCollection,\n\t    TabularDatasetChunkedView: TabularDatasetChunkedView,\n\t    createTabularDatasetChunkedView: createTabularDatasetChunkedView\n\t};\n\t\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(3), __webpack_require__(1)))\n\n/***/ },\n\n/***/ 15:\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(Backbone, _, $) {!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n\t    //jquery\n\t    //backbone\n\t], __WEBPACK_AMD_DEFINE_RESULT__ = function(){\n\t//=============================================================================\n\t/**\n\t * backbone model for icon buttons\n\t */\n\tvar IconButton = Backbone.Model.extend({\n\t    defaults: {\n\t        title           : \"\",\n\t        icon_class      : \"\",\n\t        on_click        : null,\n\t        menu_options    : null,\n\t        is_menu_button  : true,\n\t        id              : null,\n\t        href            : null,\n\t        target          : null,\n\t        enabled         : true,\n\t        visible         : true,\n\t        tooltip_config  : {}\n\t    }\n\t});\n\t\n\t/**\n\t *  backbone view for icon buttons\n\t */\n\tvar IconButtonView = Backbone.View.extend({\n\t\n\t    initialize : function(){\n\t        // better rendering this way\n\t        this.model.attributes.tooltip_config = { placement : 'bottom' };\n\t        this.model.bind( 'change', this.render, this );\n\t    },\n\t\n\t    render : function( ){\n\t        // hide tooltip\n\t        this.$el.tooltip( 'hide' );\n\t\n\t        var new_elem = this.template( this.model.toJSON() );\n\t        // configure tooltip\n\t        new_elem.tooltip( this.model.get( 'tooltip_config' ));\n\t        this.$el.replaceWith( new_elem );\n\t        this.setElement( new_elem );\n\t        return this;\n\t    },\n\t\n\t    events : {\n\t        'click' : 'click'\n\t    },\n\t\n\t    click : function( event ){\n\t        // if on_click pass to that function\n\t        if( _.isFunction( this.model.get( 'on_click' ) ) ){\n\t            this.model.get( 'on_click' )( event );\n\t            return false;\n\t        }\n\t        // otherwise, bubble up ( to href or whatever )\n\t        return true;\n\t    },\n\t\n\t    // generate html element\n\t    template: function( options ){\n\t        var buffer = 'title=\"' + options.title + '\" class=\"icon-button';\n\t\n\t        if( options.is_menu_button ){\n\t            buffer += ' menu-button';\n\t        }\n\t\n\t        buffer += ' ' + options.icon_class;\n\t\n\t        if( !options.enabled ){\n\t            buffer += '_disabled';\n\t        }\n\t\n\t        // close class tag\n\t        buffer += '\"';\n\t\n\t        if( options.id ){\n\t            buffer += ' id=\"' + options.id + '\"';\n\t        }\n\t\n\t        buffer += ' href=\"' + options.href + '\"';\n\t        // add target for href\n\t        if( options.target ){\n\t            buffer += ' target=\"' + options.target + '\"';\n\t        }\n\t        // set visibility\n\t        if( !options.visible ){\n\t            buffer += ' style=\"display: none;\"';\n\t        }\n\t\n\t        // enabled/disabled\n\t        if ( options.enabled ){\n\t            buffer = '<a ' + buffer + '/>';\n\t        } else {\n\t            buffer = '<span ' + buffer + '/>';\n\t        }\n\t\n\t        // return element\n\t        return $( buffer );\n\t    }\n\t} );\n\t\n\t// define collection\n\tvar IconButtonCollection = Backbone.Collection.extend({\n\t    model: IconButton\n\t});\n\t\n\t/**\n\t * menu with multiple icon buttons\n\t * views are not needed nor used for individual buttons\n\t */\n\tvar IconButtonMenuView = Backbone.View.extend({\n\t\n\t    tagName: 'div',\n\t\n\t    initialize: function(){\n\t        this.render();\n\t    },\n\t\n\t    render: function(){\n\t        // initialize icon buttons\n\t        var self = this;\n\t        this.collection.each(function(button){\n\t            // create and add icon button to menu\n\t            var elt = $('<a/>')\n\t                .attr('href', 'javascript:void(0)')\n\t                .attr('title', button.attributes.title)\n\t                .addClass('icon-button menu-button')\n\t                .addClass(button.attributes.icon_class)\n\t                .appendTo(self.$el)\n\t                .click(button.attributes.on_click);\n\t\n\t            // configure tooltip\n\t            if (button.attributes.tooltip_config){\n\t                elt.tooltip(button.attributes.tooltip_config);\n\t            }\n\t\n\t            // add popup menu to icon\n\t            var menu_options = button.get('options');\n\t            if (menu_options){\n\t                make_popupmenu(elt, menu_options);\n\t            }\n\t        });\n\t\n\t        // return\n\t        return this;\n\t    }\n\t});\n\t\n\t/**\n\t * Returns an IconButtonMenuView for the provided configuration.\n\t * Configuration is a list of dictionaries where each dictionary\n\t * defines an icon button. Each dictionary must have the following\n\t * elements: icon_class, title, and on_click.\n\t */\n\tvar create_icon_buttons_menu = function(config, global_config)\n\t{\n\t    // initialize global configuration\n\t    if (!global_config) global_config = {};\n\t\n\t    // create and initialize menu\n\t    var buttons = new IconButtonCollection(\n\t        _.map(config, function(button_config){\n\t            return new IconButton(_.extend(button_config, global_config));\n\t        })\n\t    );\n\t\n\t    // return menu\n\t    return new IconButtonMenuView( {collection: buttons} );\n\t};\n\t\n\t\n\t//=============================================================================\n\t    return {\n\t        IconButton              : IconButton,\n\t        IconButtonView          : IconButtonView,\n\t        IconButtonCollection    : IconButtonCollection,\n\t        IconButtonMenuView      : IconButtonMenuView,\n\t        create_icon_buttons_menu: create_icon_buttons_menu\n\t    };\n\t}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n\t\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2), __webpack_require__(3), __webpack_require__(1)))\n\n/***/ }\n\n});\n\n\n/** WEBPACK FOOTER **\n ** 1.1.bundled.js\n **/","// Additional dependencies: jQuery, underscore.\ndefine(['mvc/ui/ui-modal', 'mvc/ui/ui-frames', 'mvc/ui/icon-button'], function(Modal, Frames, mod_icon_btn) {\n\n/**\n * Dataset metedata.\n */\nvar DatasetMetadata = Backbone.Model.extend({});\n\n/**\n * A dataset. In Galaxy, datasets are associated with a history, so\n * this object is also known as a HistoryDatasetAssociation.\n */\nvar Dataset = Backbone.Model.extend({\n    defaults: {\n        id: '',\n        type: '',\n        name: '',\n        hda_ldda: 'hda',\n        metadata: null\n    },\n\n    initialize: function() {\n        // Metadata can be passed in as a model or a set of attributes; if it's\n        // already a model, there's no need to set metadata.\n        if (!this.get('metadata')) {\n            this._set_metadata();\n        }\n\n        // Update metadata on change.\n        this.on('change', this._set_metadata, this);\n    },\n\n    _set_metadata: function() {\n        var metadata = new DatasetMetadata();\n\n        // Move metadata from dataset attributes to metadata object.\n        _.each(_.keys(this.attributes), function(k) {\n            if (k.indexOf('metadata_') === 0) {\n                // Found metadata.\n                var new_key = k.split('metadata_')[1];\n                metadata.set(new_key, this.attributes[k]);\n                delete this.attributes[k];\n            }\n        }, this);\n\n        // Because this is an internal change, silence it.\n        this.set('metadata', metadata, { 'silent': true });\n    },\n\n    /**\n     * Returns dataset metadata for a given attribute.\n     */\n    get_metadata: function(attribute) {\n        return this.attributes.metadata.get(attribute);\n    },\n\n    urlRoot: Galaxy.root + \"api/datasets\"\n});\n\n/**\n * A tabular dataset. This object extends dataset to provide incremental chunked data.\n */\nvar TabularDataset = Dataset.extend({\n    defaults: _.extend({}, Dataset.prototype.defaults, {\n        chunk_url: null,\n        first_data_chunk: null,\n        chunk_index: -1,\n        at_eof: false\n    }),\n\n    initialize: function(options) {\n        Dataset.prototype.initialize.call(this);\n\n        // If first data chunk is available, next chunk is 1.\n        this.attributes.chunk_index = (this.attributes.first_data_chunk ? 1 : 0);\n        this.attributes.chunk_url = Galaxy.root + 'dataset/display?dataset_id=' + this.id;\n        this.attributes.url_viz = Galaxy.root + 'visualization';\n    },\n\n    /**\n     * Returns a jQuery Deferred object that resolves to the next data chunk or null if at EOF.\n     */\n    get_next_chunk: function() {\n        // If already at end of file, do nothing.\n        if (this.attributes.at_eof) {\n            return null;\n        }\n\n        // Get next chunk.\n        var self = this,\n            next_chunk = $.Deferred();\n        $.getJSON(this.attributes.chunk_url, {\n            chunk: self.attributes.chunk_index++\n        }).success(function(chunk) {\n            var rval;\n            if (chunk.ck_data !== '') {\n                // Found chunk.\n                rval = chunk;\n            }\n            else {\n                // At EOF.\n                self.attributes.at_eof = true;\n                rval = null;\n            }\n            next_chunk.resolve(rval);\n        });\n\n        return next_chunk;\n    }\n});\n\nvar DatasetCollection = Backbone.Collection.extend({\n    model: Dataset\n});\n\n/**\n * Provides a base for table-based, dynamic view of a tabular dataset.\n * Do not instantiate directly; use either TopLevelTabularDatasetChunkedView\n * or EmbeddedTabularDatasetChunkedView.\n */\nvar TabularDatasetChunkedView = Backbone.View.extend({\n\n    /**\n     * Initialize view and, importantly, set a scroll element.\n     */\n    initialize: function(options) {\n        // Row count for rendering.\n        this.row_count = 0;\n        this.loading_chunk = false;\n\n        // load trackster button\n        new TabularButtonTracksterView({\n            model   : options.model,\n            $el     : this.$el\n        });\n    },\n\n    expand_to_container: function(){\n        if (this.$el.height() < this.scroll_elt.height()){\n            this.attempt_to_fetch();\n        }\n    },\n\n    attempt_to_fetch: function( func ){\n        var self = this;\n        if ( !this.loading_chunk && this.scrolled_to_bottom() ) {\n            this.loading_chunk = true;\n            this.loading_indicator.show();\n            $.when(self.model.get_next_chunk()).then(function(result) {\n                if (result) {\n                    self._renderChunk(result);\n                    self.loading_chunk = false;\n                }\n                self.loading_indicator.hide();\n                self.expand_to_container();\n            });\n        }\n    },\n\n    render: function() {\n        // Add loading indicator.\n        this.loading_indicator = $('<div/>').attr('id', 'loading_indicator');\n        this.$el.append(this.loading_indicator);\n\n        // Add data table and header.\n        var data_table = $('<table/>').attr({\n            id: 'content_table',\n            cellpadding: 0\n        });\n        this.$el.append(data_table);\n        var column_names = this.model.get_metadata('column_names'),\n            header_container = $('<thead/>').appendTo(data_table),\n            header_row = $('<tr/>').appendTo(header_container);\n        if (column_names) {\n            header_row.append('<th>' + column_names.join('</th><th>') + '</th>');\n        } else {\n            for (var j = 1; j <= this.model.get_metadata('columns'); j++) {\n                header_row.append('<th>' + j + '</th>');\n            }\n        }\n\n        // Render first chunk.\n        var self = this,\n            first_chunk = this.model.get('first_data_chunk');\n        if (first_chunk) {\n            // First chunk is bootstrapped, so render now.\n            this._renderChunk(first_chunk);\n        }\n        else {\n            // No bootstrapping, so get first chunk and then render.\n            $.when(self.model.get_next_chunk()).then(function(result) {\n                self._renderChunk(result);\n            });\n        }\n\n        // -- Show new chunks during scrolling. --\n\n        // Set up chunk loading when scrolling using the scrolling element.\n        this.scroll_elt.scroll(function(){\n            self.attempt_to_fetch();\n        });\n    },\n\n    /**\n     * Returns true if user has scrolled to the bottom of the view.\n     */\n    scrolled_to_bottom: function() {\n        return false;\n    },\n\n    // -- Helper functions. --\n\n    _renderCell: function(cell_contents, index, colspan) {\n        var $cell = $('<td>').text(cell_contents);\n        var column_types = this.model.get_metadata('column_types');\n        if (colspan !== undefined) {\n            $cell.attr('colspan', colspan).addClass('stringalign');\n        } else if (column_types) {\n            if (index < column_types.length) {\n                if (column_types[index] === 'str' || column_types[index] === 'list') {\n                    /* Left align all str columns, right align the rest */\n                    $cell.addClass('stringalign');\n                }\n            }\n        }\n        return $cell;\n    },\n\n    _renderRow: function(line) {\n        // Check length of cells to ensure this is a complete row.\n        var cells = line.split('\\t'),\n            row = $('<tr>'),\n            num_columns = this.model.get_metadata('columns');\n\n        if (this.row_count % 2 !== 0) {\n            row.addClass('dark_row');\n        }\n\n        if (cells.length === num_columns) {\n            _.each(cells, function(cell_contents, index) {\n                row.append(this._renderCell(cell_contents, index));\n            }, this);\n        }\n        else if (cells.length > num_columns) {\n            // SAM file or like format with optional metadata included.\n            _.each(cells.slice(0, num_columns - 1), function(cell_contents, index) {\n                row.append(this._renderCell(cell_contents, index));\n            }, this);\n            row.append(this._renderCell(cells.slice(num_columns - 1).join('\\t'), num_columns - 1));\n        }\n        else if (num_columns > 5 && cells.length === num_columns - 1 ) {\n            // SAM file or like format with optional metadata missing.\n            _.each(cells, function(cell_contents, index) {\n                row.append(this._renderCell(cell_contents, index));\n            }, this);\n            row.append($('<td>'));\n        }\n        else {\n            // Comment line, just return the one cell.\n            row.append(this._renderCell(line, 0, num_columns));\n        }\n\n        this.row_count++;\n        return row;\n    },\n\n    _renderChunk: function(chunk) {\n        var data_table = this.$el.find('table');\n        _.each(chunk.ck_data.split('\\n'), function(line, index) {\n            if (line !== ''){\n                data_table.append(this._renderRow(line));\n            }\n        }, this);\n    }\n});\n\n/**\n * Tabular view that is placed at the top level of page. Scrolling occurs\n * view top-level elements outside of view.\n */\nvar TopLevelTabularDatasetChunkedView = TabularDatasetChunkedView.extend({\n\n    initialize: function(options) {\n        TabularDatasetChunkedView.prototype.initialize.call(this, options);\n\n        // Scrolling happens in top-level elements.\n        scroll_elt = _.find(this.$el.parents(), function(p) {\n            return $(p).css('overflow') === 'auto';\n        });\n\n        // If no scrolling element found, use window.\n        if (!scroll_elt) { scroll_elt = window; }\n\n        // Wrap scrolling element for easy access.\n        this.scroll_elt = $(scroll_elt);\n    },\n\n    /**\n     * Returns true if user has scrolled to the bottom of the view.\n     */\n    scrolled_to_bottom: function() {\n        return (this.$el.height() - this.scroll_elt.scrollTop() - this.scroll_elt.height() <= 0);\n    }\n\n});\n\n/**\n * Tabular view tnat is embedded in a page. Scrolling occurs in view's el.\n */\nvar EmbeddedTabularDatasetChunkedView = TabularDatasetChunkedView.extend({\n\n    initialize: function(options) {\n        TabularDatasetChunkedView.prototype.initialize.call(this, options);\n\n        // Because view is embedded, set up div to do scrolling.\n        this.scroll_elt = this.$el.css({\n            position: 'relative',\n            overflow: 'scroll',\n            height: options.height || '500px'\n        });\n    },\n\n    /**\n     * Returns true if user has scrolled to the bottom of the view.\n     */\n    scrolled_to_bottom: function() {\n        return this.$el.scrollTop() + this.$el.innerHeight() >= this.el.scrollHeight;\n    }\n\n});\n\n// button for trackster visualization\nvar TabularButtonTracksterView = Backbone.View.extend({\n\n    // gene region columns\n    col: {\n        chrom   : null,\n        start   : null,\n        end     : null\n    },\n\n    // url for trackster\n    url_viz     : null,\n\n    // dataset id\n    dataset_id  : null,\n\n    // database key\n    genome_build: null,\n\n    // data type\n    file_ext   : null,\n\n    // backbone initialize\n    initialize: function (options) {\n        // check if environment is available\n        var Galaxy = parent.Galaxy;\n\n        // link galaxy modal or create one\n        if (Galaxy && Galaxy.modal) {\n            this.modal = Galaxy.modal;\n        }\n\n        // link galaxy frames\n        if (Galaxy && Galaxy.frame) {\n            this.frame = Galaxy.frame;\n        }\n\n        // check\n        if (!this.modal || !this.frame) {\n            return;\n        }\n\n        // model/metadata\n        var model       = options.model;\n        var metadata    = model.get('metadata');\n\n        // check for datatype\n        if (!model.get('file_ext')) {\n            return;\n        }\n\n        // get data type\n        this.file_ext = model.get('file_ext');\n\n        // check for bed-file format\n        if (this.file_ext == 'bed')\n        {\n            // verify that metadata exists\n            if (metadata.get('chromCol') && metadata.get('startCol') && metadata.get('endCol'))\n            {\n                // read in columns\n                this.col.chrom   = metadata.get('chromCol') - 1;\n                this.col.start   = metadata.get('startCol') - 1;\n                this.col.end     = metadata.get('endCol') - 1;\n            } else {\n                console.log('TabularButtonTrackster : Bed-file metadata incomplete.');\n                return;\n            }\n        }\n\n        // check for vcf-file format\n        if (this.file_ext == 'vcf')\n        {\n            // search array\n            function search (str, array) {\n                for (var j = 0; j < array.length; j++)\n                    if (array[j].match(str)) return j;\n                return -1;\n            };\n\n            // load\n            this.col.chrom = search('Chrom', metadata.get('column_names'));\n            this.col.start = search('Pos', metadata.get('column_names'));\n            this.col.end   = null;\n\n            // verify that metadata exists\n            if (this.col.chrom == -1 || this.col.start == -1) {\n                console.log('TabularButtonTrackster : VCF-file metadata incomplete.');\n                return;\n            }\n        }\n\n        // check\n        if(this.col.chrom === undefined) {\n            return;\n        }\n\n        // get dataset id\n        if (model.id) {\n            this.dataset_id = model.id;\n        } else {\n            console.log('TabularButtonTrackster : Dataset identification is missing.');\n            return;\n        }\n\n        // get url\n        if (model.get('url_viz')) {\n            this.url_viz = model.get('url_viz');\n        } else {\n            console.log('TabularButtonTrackster : Url for visualization controller is missing.');\n            return;\n        }\n\n        // get genome_build / database key\n        if (model.get('genome_build')) {\n            this.genome_build = model.get('genome_build');\n        }\n\n        // create the icon\n        var btn_viz = new mod_icon_btn.IconButtonView({\n            model : new mod_icon_btn.IconButton({\n                title       : 'Visualize',\n                icon_class  : 'chart_curve',\n                id          : 'btn_viz'\n            })\n        });\n\n        // set element\n        this.setElement(options.$el);\n\n        // add to element\n        this.$el.append(btn_viz.render().$el);\n\n        // hide the button\n        this.hide();\n    },\n\n    // backbone events\n    events:\n    {\n        'mouseover tr'  : 'show',\n        'mouseleave'    : 'hide'\n    },\n\n    // show button\n    show: function (e) {\n        // is numeric\n        function is_numeric(n) {\n            return !isNaN(parseFloat(n)) && isFinite(n);\n        };\n\n        // check\n        if(this.col.chrom === null)\n            return;\n\n        // get selected data line\n        var row = $(e.target).parent();\n\n        // verify that location has been found\n        var chrom = row.children().eq(this.col.chrom).html();\n        var start = row.children().eq(this.col.start).html();\n\n        // end is optional\n        var end = this.col.end ? row.children().eq(this.col.end).html() : start;\n\n        // double check location\n        if (!chrom.match(\"^#\") && chrom !== \"\" && is_numeric(start)) {\n\n            // get target gene region\n            var btn_viz_pars = {\n                dataset_id  : this.dataset_id,\n                gene_region : chrom + \":\" + start + \"-\" + end\n            };\n\n            // get button position\n            var offset  = row.offset();\n            var left    = offset.left - 10;\n            var top     = offset.top - $(window).scrollTop() + 3;\n\n            // update css\n            $('#btn_viz').css({'position': 'fixed', 'top': top + 'px', 'left': left + 'px'});\n            $('#btn_viz').off('click');\n            $('#btn_viz').click(this.create_trackster_action(this.url_viz, btn_viz_pars, this.genome_build));\n\n            // show the button\n            $('#btn_viz').show();\n        } else {\n            // hide the button\n            $('#btn_viz').hide();\n        }\n    },\n\n    // hide button\n    hide: function () {\n        this.$el.find('#btn_viz').hide();\n    },\n\n    // create action\n    create_trackster_action : function (vis_url, dataset_params, dbkey) {\n        // link this\n        var self = this;\n\n        // create function\n        return function() {\n            var listTracksParams = {};\n            if (dbkey) {\n                listTracksParams[ 'f-dbkey' ] = dbkey;\n            }\n            $.ajax({\n                url: vis_url + '/list_tracks?' + $.param( listTracksParams ),\n                dataType: 'html',\n                error: function() {\n                    // show error message\n                    self.modal.show({\n                        title   : 'Something went wrong!',\n                        body    : 'Unfortunately we could not add this dataset to the track browser. Please try again or contact us.',\n                        buttons : {\n                            'Cancel': function(){\n                                self.modal.hide();\n                            }\n                        }\n                    });\n                },\n                success: function(table_html) {\n                    self.modal.show({\n                        title   : 'View Data in a New or Saved Visualization',\n                        buttons :{\n                            'Cancel': function(){\n                                self.modal.hide();\n                            },\n                            'View in saved visualization': function(){\n                                // show modal with saved visualizations\n                                self.modal.show(\n                                {\n                                    title   : 'Add Data to Saved Visualization',\n                                    body    : table_html,\n                                    buttons : {\n                                        'Cancel': function(){\n                                            self.modal.hide();\n                                        },\n                                        'Add to visualization': function(){\n                                            // hide\n                                            self.modal.hide();\n\n                                            // search selected fields\n                                            self.modal.$el.find('input[name=id]:checked').each(function(){\n                                                // get visualization id\n                                                var vis_id = $(this).val();\n                                                dataset_params.id = vis_id;\n\n                                                // add widget\n                                                self.frame.add({\n                                                    title    : 'Trackster',\n                                                    type     : 'url',\n                                                    content  : vis_url + '/trackster?' + $.param(dataset_params)\n                                                });\n                                            });\n                                        }\n                                    }\n                                });\n                            },\n                            'View in new visualization': function(){\n                                // hide\n                                self.modal.hide();\n\n                                // add widget\n                                self.frame.add({\n                                    title    : 'Trackster',\n                                    type     : 'url',\n                                    content  : vis_url + '/trackster?' + $.param(dataset_params)\n                                });\n                            }\n                        }\n                    });\n                }\n            });\n            return false;\n        };\n    }\n});\n\n// -- Utility functions. --\n\n/**\n * Create a model, attach it to a view, render view, and attach it to a parent element.\n */\nvar createModelAndView = function(model, view, model_config, parent_elt) {\n    // Create model, view.\n    var a_view = new view({\n        model: new model(model_config)\n    });\n\n    // Render view and add to parent element.\n    a_view.render();\n    if (parent_elt) {\n        parent_elt.append(a_view.$el);\n    }\n\n    return a_view;\n};\n\n/**\n * Create a tabular dataset chunked view (and requisite tabular dataset model)\n * and appends to parent_elt.\n */\nvar createTabularDatasetChunkedView = function(options) {\n    // If no model, create and set model from dataset config.\n    if (!options.model) {\n        options.model = new TabularDataset(options.dataset_config);\n    }\n\n    var parent_elt = options.parent_elt;\n    var embedded = options.embedded;\n\n    // Clean up options so that only needed options are passed to view.\n    delete options.embedded;\n    delete options.parent_elt;\n    delete options.dataset_config;\n\n    // Create and set up view.\n    var view = (embedded ? new EmbeddedTabularDatasetChunkedView(options) :\n                           new TopLevelTabularDatasetChunkedView(options));\n    view.render();\n\n    if (parent_elt) {\n        parent_elt.append(view.$el);\n        // If we're sticking this in another element, once it's appended check\n        // to make sure we've filled enough space.\n        // Without this, the scroll elements don't work.\n        view.expand_to_container();\n    }\n\n    return view;\n};\n\nreturn {\n    Dataset: Dataset,\n    TabularDataset: TabularDataset,\n    DatasetCollection: DatasetCollection,\n    TabularDatasetChunkedView: TabularDatasetChunkedView,\n    createTabularDatasetChunkedView: createTabularDatasetChunkedView\n};\n\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./galaxy/scripts/mvc/dataset/data.js\n ** module id = 11\n ** module chunks = 0 1 3\n **/","define([\n    //jquery\n    //backbone\n], function(){\n//=============================================================================\n/**\n * backbone model for icon buttons\n */\nvar IconButton = Backbone.Model.extend({\n    defaults: {\n        title           : \"\",\n        icon_class      : \"\",\n        on_click        : null,\n        menu_options    : null,\n        is_menu_button  : true,\n        id              : null,\n        href            : null,\n        target          : null,\n        enabled         : true,\n        visible         : true,\n        tooltip_config  : {}\n    }\n});\n\n/**\n *  backbone view for icon buttons\n */\nvar IconButtonView = Backbone.View.extend({\n\n    initialize : function(){\n        // better rendering this way\n        this.model.attributes.tooltip_config = { placement : 'bottom' };\n        this.model.bind( 'change', this.render, this );\n    },\n\n    render : function( ){\n        // hide tooltip\n        this.$el.tooltip( 'hide' );\n\n        var new_elem = this.template( this.model.toJSON() );\n        // configure tooltip\n        new_elem.tooltip( this.model.get( 'tooltip_config' ));\n        this.$el.replaceWith( new_elem );\n        this.setElement( new_elem );\n        return this;\n    },\n\n    events : {\n        'click' : 'click'\n    },\n\n    click : function( event ){\n        // if on_click pass to that function\n        if( _.isFunction( this.model.get( 'on_click' ) ) ){\n            this.model.get( 'on_click' )( event );\n            return false;\n        }\n        // otherwise, bubble up ( to href or whatever )\n        return true;\n    },\n\n    // generate html element\n    template: function( options ){\n        var buffer = 'title=\"' + options.title + '\" class=\"icon-button';\n\n        if( options.is_menu_button ){\n            buffer += ' menu-button';\n        }\n\n        buffer += ' ' + options.icon_class;\n\n        if( !options.enabled ){\n            buffer += '_disabled';\n        }\n\n        // close class tag\n        buffer += '\"';\n\n        if( options.id ){\n            buffer += ' id=\"' + options.id + '\"';\n        }\n\n        buffer += ' href=\"' + options.href + '\"';\n        // add target for href\n        if( options.target ){\n            buffer += ' target=\"' + options.target + '\"';\n        }\n        // set visibility\n        if( !options.visible ){\n            buffer += ' style=\"display: none;\"';\n        }\n\n        // enabled/disabled\n        if ( options.enabled ){\n            buffer = '<a ' + buffer + '/>';\n        } else {\n            buffer = '<span ' + buffer + '/>';\n        }\n\n        // return element\n        return $( buffer );\n    }\n} );\n\n// define collection\nvar IconButtonCollection = Backbone.Collection.extend({\n    model: IconButton\n});\n\n/**\n * menu with multiple icon buttons\n * views are not needed nor used for individual buttons\n */\nvar IconButtonMenuView = Backbone.View.extend({\n\n    tagName: 'div',\n\n    initialize: function(){\n        this.render();\n    },\n\n    render: function(){\n        // initialize icon buttons\n        var self = this;\n        this.collection.each(function(button){\n            // create and add icon button to menu\n            var elt = $('<a/>')\n                .attr('href', 'javascript:void(0)')\n                .attr('title', button.attributes.title)\n                .addClass('icon-button menu-button')\n                .addClass(button.attributes.icon_class)\n                .appendTo(self.$el)\n                .click(button.attributes.on_click);\n\n            // configure tooltip\n            if (button.attributes.tooltip_config){\n                elt.tooltip(button.attributes.tooltip_config);\n            }\n\n            // add popup menu to icon\n            var menu_options = button.get('options');\n            if (menu_options){\n                make_popupmenu(elt, menu_options);\n            }\n        });\n\n        // return\n        return this;\n    }\n});\n\n/**\n * Returns an IconButtonMenuView for the provided configuration.\n * Configuration is a list of dictionaries where each dictionary\n * defines an icon button. Each dictionary must have the following\n * elements: icon_class, title, and on_click.\n */\nvar create_icon_buttons_menu = function(config, global_config)\n{\n    // initialize global configuration\n    if (!global_config) global_config = {};\n\n    // create and initialize menu\n    var buttons = new IconButtonCollection(\n        _.map(config, function(button_config){\n            return new IconButton(_.extend(button_config, global_config));\n        })\n    );\n\n    // return menu\n    return new IconButtonMenuView( {collection: buttons} );\n};\n\n\n//=============================================================================\n    return {\n        IconButton              : IconButton,\n        IconButtonView          : IconButtonView,\n        IconButtonCollection    : IconButtonCollection,\n        IconButtonMenuView      : IconButtonMenuView,\n        create_icon_buttons_menu: create_icon_buttons_menu\n    };\n})\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./galaxy/scripts/mvc/ui/icon-button.js\n ** module id = 15\n ** module chunks = 0 1 3\n **/"],"sourceRoot":""}