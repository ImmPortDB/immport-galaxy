define("mvc/visualization/chart/utilities/series",["exports","underscore","d3"],function(r,a,n){"use strict";function e(r){if(r&&r.__esModule)return r;var a={};if(null!=r)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(a[n]=r[n]);return a.default=r,a}function i(r,a){t.each(a,function(a){t.each(a.values,function(a,n){for(var e in r)a[e]=parseInt(n)})})}Object.defineProperty(r,"__esModule",{value:!0});var t=e(a),o=e(n);r.default={makeCategories:function(r,a){var n={},e=r[0].__data_columns;return t.each(a,function(r){e[r].is_label&&(n[r]=[])}),r&&r[0]&&t.each(r[0].values,function(r){for(var a in n)n[a].push(String(r[a]))}),i(n,r),{array:n}},makeUniqueCategories:function(r,a){var n={},e={},i={},o=r[0].__data_columns;t.each(o,function(r,a){r.is_label&&(n[a]={},e[a]=[],i[a]=0)});for(var u in r){var s=r[u];for(var c in s.values){var v=s.values[c];for(var f in n){var l=String(v[f]);void 0===n[f][l]&&(n[f][l]=i[f],e[f].push(a?[i[f],l]:l),i[f]++)}}}for(var m in r){var d=r[m];for(var h in d.values){var p=d.values[h];for(var x in n){var _=String(p[x]);p[x]=n[x][_]}}}return{categories:n,array:e,counter:i}},makeSeries:function(r,a){var n=[];for(var e in r){var i=r[e],t=[];for(var o in i.values){var u=[];if(a)for(var s in a){var c=a[s];u.push(i.values[o][c])}else for(var v in i.values[o])u.push(i.values[o][v]);t.push(u)}n.push(t)}return n},getDomains:function(r,a){function n(a,n){var e=void 0;for(var i in r){var t=o[a](r[i].values,function(r){return r[n]});e=void 0===e?t:Math[a](e,t)}return e}var e={};for(var i in a){var t=a[i];e[t]={min:n("min",t),max:n("max",t)}}return e},mapCategories:i,makeTickFormat:function(r){var a=r.type,n=r.precision,e=r.categories,i=r.formatter;if("hide"==a)i(function(){return""});else if("auto"==a)e&&i(function(r){return e[r]||""});else{var t=function(r){switch(a){case"s":var e=o.formatPrefix(r);return e.scale(r).toFixed()+e.symbol;default:return o.format("."+n+a)(r)}};i(e?function(r){var a=e[r];if(!a)return"";if(isNaN(a))return a;try{return t(a)}catch(r){return a}}:function(r){return t(r)})}},addZoom:function(r){function a(r,a){return r[0]=Math.min(Math.max(r[0],a[0]),a[1]-a[1]/n),r[1]=Math.max(a[0]+a[1]/n,Math.min(r[1],a[1])),r}var n=100,e=r.yAxis,i=r.xAxis,t=r.xDomain||i.scale().domain,u=r.yDomain||e.scale().domain,s=r.redraw,c=r.svg,v=i.scale(),f=e.scale(),l=v.domain().slice(),m=f.domain().slice(),d=o.behavior.zoom();return v.nice(),f.nice(),d.x(v).y(f).scaleExtent([1,n]).on("zoom",function(){u(a(f.domain(),m)),t(a(v.domain(),l)),s()}),c.call(d).on("dblclick.zoom",function(){t(l),u(m),s(),d.scale(1),d.translate([0,0])}),d}}});