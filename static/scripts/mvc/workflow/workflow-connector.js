define("mvc/workflow/workflow-connector",["exports"],function(t){"use strict";function e(t,e){this.canvas=null,this.dragging=!1,this.inner_color="#FFFFFF",this.outer_color="#D8B365",t&&e&&this.connect(t,e)}Object.defineProperty(t,"__esModule",{value:!0}),$.extend(e.prototype,{connect:function(t,e){this.handle1=t,this.handle1&&this.handle1.connect(this),this.handle2=e,this.handle2&&this.handle2.connect(this)},destroy:function(){this.handle1&&this.handle1.disconnect(this),this.handle2&&this.handle2.disconnect(this),$(this.canvas).remove()},destroyIfInvalid:function(){this.handle1&&this.handle2&&!this.handle2.attachable(this.handle1)&&this.destroy()},redraw:function(){var t=this.handle1,e=this.handle2,n=t&&t.isMappedOver(),i=e&&e.isMappedOver(),s=(n?"start-ribbon":"")+" "+(i?"end-ribbon":""),a=$("#canvas-container");this.canvas||(this.canvas=document.createElement("canvas"),a.append($(this.canvas)),this.dragging&&(this.canvas.style.zIndex="300")),this.canvas.setAttribute("handle1-id",t&&t.element.getAttribute?t.element.getAttribute("id"):""),this.canvas.setAttribute("handle2-id",e&&e.element.getAttribute?e.element.getAttribute("id"):"");var h=function(t){return $(t).offset().left-a.offset().left},o=function(t){return $(t).offset().top-a.offset().top};if(t&&e){var r=h(t.element)+5,l=o(t.element)+5,c=h(e.element)+5,d=o(e.element)+5,u=Math.min(r,c),v=Math.max(r,c),f=Math.min(l,d),b=Math.max(l,d),m=Math.min(Math.max(Math.abs(b-f)/2,100),300),g=u-100,p=f-100,x=v-u+200,y=b-f+200;this.canvas.style.left=g+"px",this.canvas.style.top=p+"px",this.canvas.setAttribute("width",x),this.canvas.setAttribute("height",y),this.canvas.setAttribute("class",s),r-=g,l-=p,c-=g,d-=p;this.canvas.getContext("2d");var M=null,_=null,A=1;if(n){M=[-6,-3,0,3,6];A=5}else M=[0];if(i){_=[-6,-3,0,3,6];A=5}else _=[0];for(var w=this,k=0;k<A;k++){var F=5,C=7;(M.length>1||_.length>1)&&(F=1,C=3),w.draw_outlined_curve(r,l,c,d,m,F,C,M[k%M.length],_[k%_.length])}}},draw_outlined_curve:function(t,e,n,i,s,a,h,o,r){var o=o||0,r=r||0,l=this.canvas.getContext("2d");l.lineCap="round",l.strokeStyle=this.outer_color,l.lineWidth=h,l.beginPath(),l.moveTo(t,e+o),l.bezierCurveTo(t+s,e+o,n-s,i+r,n,i+r),l.stroke(),l.strokeStyle=this.inner_color,l.lineWidth=a,l.beginPath(),l.moveTo(t,e+o),l.bezierCurveTo(t+s,e+o,n-s,i+r,n,i+r),l.stroke()}}),t.default=e});