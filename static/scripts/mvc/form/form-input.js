define("mvc/form/form-input",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=Backbone.View.extend({initialize:function(e,i){this.app=e,this.app_options=e.model?e.model.attributes:{},this.field=i&&i.field||new Backbone.View,this.model=i&&i.model||new Backbone.Model({text_enable:this.app_options.text_enable||"Enable",text_disable:this.app_options.text_disable||"Disable",cls_enable:this.app_options.cls_enable||"fa fa-caret-square-o-down",cls_disable:this.app_options.cls_disable||"fa fa-caret-square-o-up",always_refresh:this.app_options.always_refresh}).set(i),this.setElement(this._template()),this.$field=this.$(".ui-form-field"),this.$info=this.$(".ui-form-info"),this.$preview=this.$(".ui-form-preview"),this.$collapsible=this.$(".ui-form-collapsible"),this.$collapsible_text=this.$(".ui-form-collapsible-text"),this.$collapsible_icon=this.$(".ui-form-collapsible-icon"),this.$title=this.$(".ui-form-title"),this.$title_text=this.$(".ui-form-title-text"),this.$error_text=this.$(".ui-form-error-text"),this.$error=this.$(".ui-form-error"),this.$backdrop=this.$(".ui-form-backdrop"),this.$field.prepend(this.field.$el);var t=this.model.get("collapsible_value");this.field.collapsed=void 0!==t&&JSON.stringify(this.model.get("value"))==JSON.stringify(t),this.listenTo(this.model,"change",this.render,this),this.render();var l=this;this.$collapsible.on("click",function(){l.field.collapsed=!l.field.collapsed,e.trigger&&e.trigger("change"),l.render()}),this.field.model&&!this.model.get("always_refresh")&&this.listenTo(this.field.model,"change:value",function(){l.reset()})},backdrop:function(){this.model.set("backdrop",!0)},error:function(e){this.model.set("error_text",e)},reset:function(){!this.model.get("fixed")&&this.model.set("error_text",null)},render:function(){$(".tooltip").hide();var e=this.model.get("help",""),i=this.model.get("argument");i&&-1==e.indexOf("("+i+")")&&(e+=" ("+i+")"),this.$info.html(e),this.$el[this.model.get("hidden")?"hide":"show"]();var t=_.escape(this.model.get("text_value")).replace(/\n/g,"<br />");this.$preview[this.field.collapsed&&this.model.get("collapsible_preview")||this.model.get("disabled")?"show":"hide"]().html(t);var l=this.model.get("error_text");if(this.$error[l?"show":"hide"](),this.$el[l?"addClass":"removeClass"]("ui-error"),this.$error_text.html(l),this.$backdrop[this.model.get("backdrop")?"show":"hide"](),this.field.collapsed||this.model.get("disabled")?this.$field.hide():this.$field.show(),this.field.model&&this.field.model.set({color:this.model.get("color"),style:this.model.get("style")}),(void 0===this.field.workflowRuntimeCompatible||this.field.workflowRuntimeCompatible)&&!this.model.get("disabled")&&void 0!==this.model.get("collapsible_value")){console.log(this.field);var s=this.field.collapsed?"enable":"disable";this.$title_text.hide(),this.$collapsible.show(),this.$collapsible_text.text(this.model.get("label")),this.$collapsible_icon.removeClass().addClass("icon").addClass(this.model.get("cls_"+s)).attr("data-original-title",this.model.get("text_"+s)).tooltip({placement:"bottom"})}else this.$title_text.show().text(this.model.get("label")),this.$collapsible.hide()},_template:function(){return $("<div/>").addClass("ui-form-element").append($("<div/>").addClass("ui-form-error ui-error").append($("<span/>").addClass("fa fa-arrow-down")).append($("<span/>").addClass("ui-form-error-text"))).append($("<div/>").addClass("ui-form-title").append($("<div/>").addClass("ui-form-collapsible").append($("<i/>").addClass("ui-form-collapsible-icon")).append($("<span/>").addClass("ui-form-collapsible-text"))).append($("<span/>").addClass("ui-form-title-text"))).append($("<div/>").addClass("ui-form-field").append($("<span/>").addClass("ui-form-info")).append($("<div/>").addClass("ui-form-backdrop"))).append($("<div/>").addClass("ui-form-preview"))}})});