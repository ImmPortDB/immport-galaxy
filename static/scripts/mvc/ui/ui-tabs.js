define(["utils/utils"],function(a){var b=Backbone.View.extend({initialize:function(b){var c=this;this.visible=!1,this.$nav=null,this.$content=null,this.first_tab=null,this.current_id=null,this.list={},this.options=a.merge(b,{title_new:"",operations:null,onnew:null,max:null,onchange:null}),this.setElement($(this._template(this.options))),this.$nav=this.$(".tab-navigation"),this.$content=this.$(".tab-content"),this.$operations=this.$nav.find(".tab-operations"),this.options.operations&&$.each(this.options.operations,function(a,b){b.$el.prop("id",a),c.$operations.append(b.$el)}),this.options.onnew&&this.$nav.append($(this._template_tab_new(this.options)).tooltip({title:"Add a new tab",placement:"bottom",container:c.$el}).on("click",function(){c.options.onnew()})),this.$tabnew=this.$nav.find(".tab-new"),this.$el.on("click",function(){$(".tooltip").hide()})},size:function(){return _.size(this.list)},current:function(){return this.$el.find(".tab-pane.active").attr("id")},add:function(a){var b=this,c=a.id,d=$(this._template_tab(a)),e=$("<div/>").attr("id",a.id).addClass("tab-pane");this.list[c]=!0,this.options.max&&this.size()>=this.options.max&&this.$tabnew.hide(),this.options.onnew?this.$tabnew.before(d):this.$nav.append(d),a.ondel?d.find(".tab-delete").tooltip({title:"Delete this tab",placement:"bottom",container:b.$el}).on("click",function(){a.ondel()}):d.tooltip({title:a.tooltip,placement:"bottom",container:b.$el}),d.on("click",function(d){d.preventDefault(),a.onclick?a.onclick():b.show(c)}),this.$content.append(e.append(a.$el)),1==this.size()&&(d.addClass("active"),e.addClass("active"),this.first_tab=c),this.current_id||(this.current_id=c)},del:function(a){this.$("#tab-"+a).remove(),this.$("#"+a).remove(),this.first_tab=this.first_tab==a?null:this.first_tab,null!=this.first_tab&&this.show(this.first_tab),this.list[a]&&delete this.list[a],this.size()<this.options.max&&this.$el.find(".ui-tabs-new").show()},delRemovable:function(){for(var a in this.list)this.del(a)},show:function(a){this.$el.fadeIn("fast"),this.visible=!0,a&&(this.$("#tab-"+this.current_id).removeClass("active"),this.$("#"+this.current_id).removeClass("active"),this.$("#tab-"+a).addClass("active"),this.$("#"+a).addClass("active"),this.current_id=a),this.options.onchange&&this.options.onchange(a)},hide:function(){this.$el.fadeOut("fast"),this.visible=!1},hideOperation:function(a){this.$nav.find("#"+a).hide()},showOperation:function(a){this.$nav.find("#"+a).show()},setOperation:function(a,b){this.$nav.find("#"+a).off("click").on("click",b)},title:function(a,b){var c=this.$("#tab-title-text-"+a);return b&&c.html(b),c.html()},retitle:function(a){var b=0;for(var c in this.list)this.title(c,++b+": "+a)},_template:function(){return $("<div/>").addClass("ui-tabs tabbable tabs-left").append($("<ul/>").addClass("tab-navigation nav nav-tabs").append($("<div/>").addClass("tab-operations"))).append($("<div/>").addClass("tab-content"))},_template_tab:function(a){var b=$("<li/>").addClass("tab-element").attr("id","tab-"+a.id).append($("<a/>").attr("id","tab-title-link-"+a.id)),c=b.find("a");return a.icon&&c.append($("<i/>").addClass("tab-icon fa").addClass(a.icon)),c.append($("<span/>").attr("id","tab-title-text-"+a.id).addClass("tab-title-text").append(a.title)),a.ondel&&c.append($("<i/>").addClass("tab-delete fa fa-minus-circle")),b},_template_tab_new:function(a){return $("<li/>").addClass("tab-new").append($("<a/>").attr("href","javascript:void(0);").append($("<i/>").addClass("tab-icon fa fa-plus-circle")).append(a.title_new))}});return{View:b}});
//# sourceMappingURL=../../../maps/mvc/ui/ui-tabs.js.map