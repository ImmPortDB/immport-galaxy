define("mvc/ui/ui-table",["exports","utils/utils"],function(t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=function(t){return t&&t.__esModule?t:{default:t}}(i),n=Backbone.View.extend({initialize:function(t){this.options=e.default.merge(t,{content:"No content available.",onchange:null,ondblclick:null,onconfirm:null,cls:"ui-table",selectable:!0,cls_tr:""}),this.setElement(this._template()),this.$thead=this.$("thead"),this.$tbody=this.$("tbody"),this.$tmessage=this.$("tmessage"),this.row=this._row(),this.row_count=0},events:{click:"_onclick",dblclick:"_ondblclick"},addHeader:function(t){this.row.append($("<th/>").append(t))},appendHeader:function(){this.$thead.append(this.row),this.row=$("<tr/>")},add:function(t,i,e){var n=$("<td/>");i&&n.css("width",i),e&&n.css("text-align",e),this.row.append(n.append(t))},append:function(t,i){this._commit(t,i,!1)},prepend:function(t,i){this._commit(t,i,!0)},get:function(t){return this.$("#"+t)},del:function(t){var i=this.$tbody.find("#"+t);i.length>0&&(i.remove(),this.row_count--,this._refresh())},delAll:function(){this.$tbody.empty(),this.row_count=0,this._refresh()},value:function(t){if(this.options.selectable){this.before=this.$tbody.find(".current").attr("id"),void 0!==t&&(this.$tbody.find("tr").removeClass("current"),t&&this.$tbody.find("#"+t).addClass("current"));var i=this.$tbody.find(".current").attr("id");return void 0===i?null:(i!=this.before&&this.options.onchange&&this.options.onchange(t),i)}},size:function(){return this.$tbody.find("tr").length},_commit:function(t,i,e){this.del(t),this.row.attr("id",t),e?this.$tbody.prepend(this.row):this.$tbody.append(this.row),i&&(this.row.hide(),this.row.fadeIn()),this.row=this._row(),this.row_count++,this._refresh()},_row:function(){return $('<tr class="'+this.options.cls_tr+'"></tr>')},_onclick:function(t){var i=this.value(),e=$(t.target).closest("tr").attr("id");""!=e&&e&&i!=e&&(this.options.onconfirm?this.options.onconfirm(e):this.value(e))},_ondblclick:function(t){var i=this.value();i&&this.options.ondblclick&&this.options.ondblclick(i)},_refresh:function(){0==this.row_count?this.$tmessage.show():this.$tmessage.hide()},_template:function(){return'<div><table class="'+this.options.cls+'"><thead/><tbody/></table><tmessage>'+this.options.content+"</tmessage><div>"}});t.default={View:n}});