define("mvc/ui/ui-slider",["exports","utils/utils"],function(e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=function(e){return e&&e.__esModule?e:{default:e}}(i),s=Backbone.View.extend({initialize:function(e){var i=this;this.model=e&&e.model||new Backbone.Model({id:t.default.uid(),min:null,max:null,step:null,precise:!1,split:1e4,value:null,onchange:function(){}}).set(e),this.setElement(this._template()),this.$el.attr("id",this.model.id),this.$text=this.$(".ui-form-slider-text"),this.$slider=this.$(".ui-form-slider-element");var s=[];this.$text.on("change",function(){i.value($(this).val())}).on("keyup",function(e){s[e.which]=!1}).on("keydown",function(e){var t=e.which;s[t]=!0,i.model.get("is_workflow")&&s[16]&&52==t?(i.value("$"),event.preventDefault()):8==t||9==t||13==t||37==t||39==t||t>=48&&t<=57&&!s[16]||t>=96&&t<=105||(190==t||110==t)&&-1==$(this).val().indexOf(".")&&i.model.get("precise")||(189==t||109==t)&&-1==$(this).val().indexOf("-")||i._isParameter($(this).val())||s[91]||s[17]||event.preventDefault()});var l=this.model.attributes;this.has_slider=null!==l.max&&null!==l.min&&l.max>l.min;var n=l.step;n||(n=l.precise&&this.has_slider?(l.max-l.min)/l.split:1),this.has_slider?(this.$text.addClass("ui-form-slider-left"),this.$slider.slider({min:l.min,max:l.max,step:n}).on("slide",function(e,t){i.value(t.value)})):this.$slider.hide(),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var e=this.model.get("value");this.has_slider&&this.$slider.slider("value",e),e!==this.$text.val()&&this.$text.val(e)},value:function(e){var i=this.model.attributes;return void 0!==e&&(null===e||""===e||this._isParameter(e)||(isNaN(e)&&(e=0),i.precise||(e=Math.round(e)),null===i.max||isNaN(i.max)||(e=Math.min(e,i.max)),null===i.min||isNaN(i.min)||(e=Math.max(e,i.min))),this.model.set("value",e),this.model.trigger("change"),i.onchange(e)),this.model.get("value")},_isParameter:function(e){return this.model.get("is_workflow")&&"$"===String(e).substring(0,1)},_template:function(){return'<div class="ui-form-slider"><input class="ui-form-slider-text" type="text"/><div class="ui-form-slider-element"/></div>'}});e.default={View:s}});